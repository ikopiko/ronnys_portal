(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207cfa"],{a1b6:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{"data-app":""}},[e("Layout",[e("div",{staticClass:"row"},[e("div",{staticClass:"table-responsive mb-0",staticStyle:{"min-height":"300px"}},[e("b-table",{staticClass:"datatables",attrs:{items:t.requestList,fields:t.fields,responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(actions)",fn:function(s){return[e("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(e){return t.info(s.item,s.index,e.target)}}},[t._v(" Request Details ")])]}}])})],1)]),e("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.order_id,"hide-footer":""}},[e("p",{staticClass:"mb-2"},[t._v(" Request id: "),e("span",{staticClass:"text-primary"},[t._v(t._s(t.infoModal.id))])]),e("p",{staticClass:"mb-2"},[t._v(" Requested Product: "),e("span",{staticClass:"text-primary"},[t._v(t._s(t.infoModal.product_name))])]),e("p",{staticClass:"mb-2"},[t._v(" Requested From: "),e("span",{staticClass:"text-primary"},[t._v(t._s(t.infoModal.warehouse))])]),e("p",{staticClass:"mb-2"},[t._v(" Date: "),e("span",{staticClass:"text-primary"},[t._v(t._s(t.infoModal.date))])]),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-centered table-nowrap"},[e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Product Name")]),e("th",{attrs:{scope:"col"}},[t._v("Product QTY")]),e("th",{attrs:{scope:"col"}},[t._v("Product Unit")])])]),e("tbody",[e("tr",[e("td",[e("div",[e("h5",{staticClass:"text-truncate font-size-14"},[t._v(" "+t._s(t.infoModal.product_name)+" ")])])]),e("td",[t._v(" "+t._s(t.infoModal.quantity)+" ")]),e("td",[t._v(t._s(t.infoModal.unit))])])])]),e("b-button",{staticClass:"mx-3",attrs:{variant:"success",block:""},on:{click:function(e){return t.acceptRequest(t.infoModal)}}},[t._v("Accept")]),e("b-button",{staticClass:"mx-2",attrs:{variant:"warning",block:""},on:{click:function(e){return t.rejectRequest(t.infoModal)}}},[t._v("Reject")])],1)])],1)],1)},i=[],o=s("bc3a"),r=s.n(o),n=s("444f"),d={page:{title:"Supplies List"},components:{Layout:n["a"]},computed:{},watch:{},data(){return{requestList:[],fields:[{key:"id",label:"ID",sortable:!0},{key:"product_name",label:"Product",sortable:!0},{key:"quantity",label:"QTY",sortable:!0},{key:"unit",label:"Unit",sortable:!0},{key:"warehouse_name",label:"Requested From",sortable:!0},{key:"actions",label:"Actions"}],infoModal:{id:"",title:"info-modal",product_name:"",quantity:"",unit:"",warehouse:"",date:""},requests:[],reqResp:{},filter:null,filterOn:[],sortBy:"id",sortDesc:!1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],totalRows:1}},mounted(){this.updateList()},methods:{updateList(){this.loggedUser=this.$store.state.authfack.user;const t=this.loggedUser.token;var e=new FormData;e.set("status",1),r.a.request({method:"post",url:this.$hostname+"warehouses/request-list",headers:{Authorization:"Bearer "+t},data:e}).then(t=>{this.requestList=t.data})},info(t,e,s){this.infoModal.title="Row index: "+e,this.infoModal.id=t.id,this.infoModal.product_name=t.product_name,this.infoModal.unit=t.unit,this.infoModal.quantity=t.quantity,this.infoModal.warehouse=t.warehouse_name,this.infoModal.date=t.created_at,this.$root.$emit("bv::show::modal",this.infoModal.id,s)},onFiltered(t){this.totalRows=t.length,this.currentPage=1},acceptRequest(t){var e={id:"",quantity:0};e.id=t.id,e.quantity=t.quantity,this.requests.push(e);const s=this.loggedUser.token;r.a.request({method:"post",url:this.$hostname+"warehouses/accept-request",headers:{Authorization:"Bearer "+s},data:{requests:this.requests}}).then(t=>{200===t.status&&(alert("Request Sent"),this.$root.$emit("bv::hide::modal",this.infoModal.id),this.updateList())})},rejectRequest(t){var e={id:""};e.id=t.id,this.requests.push(e);const s=this.loggedUser.token;r.a.request({method:"post",url:this.$hostname+"warehouses/void-request",headers:{Authorization:"Bearer "+s},data:{requests:this.requests}}).then(t=>{200===t.status&&(alert("Request Voided"),this.$root.$emit("bv::hide::modal",this.infoModal.id),this.updateList())})}}},l=d,u=s("0c7c"),c=Object(u["a"])(l,a,i,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d207cfa.42860a7c.js.map