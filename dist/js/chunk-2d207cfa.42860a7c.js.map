{"version":3,"sources":["webpack:///./src/router/views/warehouse/manageSupplies.vue","webpack:///src/router/views/warehouse/manageSupplies.vue","webpack:///./src/router/views/warehouse/manageSupplies.vue?7b32","webpack:///./src/router/views/warehouse/manageSupplies.vue?53c4"],"names":["render","_vm","this","_c","_self","attrs","staticClass","staticStyle","requestList","fields","perPage","currentPage","sortBy","sortDesc","filter","filterOn","on","$event","onFiltered","scopedSlots","_u","key","fn","row","info","item","index","target","_v","infoModal","id","order_id","_s","product_name","warehouse","date","quantity","unit","acceptRequest","rejectRequest","staticRenderFns","page","title","components","Layout","computed","watch","data","label","sortable","requests","reqResp","pageOptions","totalRows","mounted","updateList","methods","loggedUser","$store","state","authfack","user","TOKEN","token","bodyFormData","FormData","set","axios","request","method","url","$hostname","headers","Authorization","then","response","button","warehouse_name","created_at","$root","$emit","filteredItems","length","req","push","status","alert","component"],"mappings":"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","file":"js/chunk-2d207cfa.42860a7c.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"data-app\":\"\"}},[_c('Layout',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"table-responsive mb-0\",staticStyle:{\"min-height\":\"300px\"}},[_c('b-table',{staticClass:\"datatables\",attrs:{\"items\":_vm.requestList,\"fields\":_vm.fields,\"responsive\":\"sm\",\"per-page\":_vm.perPage,\"current-page\":_vm.currentPage,\"sort-by\":_vm.sortBy,\"sort-desc\":_vm.sortDesc,\"filter\":_vm.filter,\"filter-included-fields\":_vm.filterOn},on:{\"update:sortBy\":function($event){_vm.sortBy=$event},\"update:sort-by\":function($event){_vm.sortBy=$event},\"update:sortDesc\":function($event){_vm.sortDesc=$event},\"update:sort-desc\":function($event){_vm.sortDesc=$event},\"filtered\":_vm.onFiltered},scopedSlots:_vm._u([{key:\"cell(actions)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-1\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.info(row.item, row.index, $event.target)}}},[_vm._v(\" Request Details \")])]}}])})],1)]),_c('b-modal',{attrs:{\"id\":_vm.infoModal.id,\"title\":_vm.infoModal.order_id,\"hide-footer\":\"\"}},[_c('p',{staticClass:\"mb-2\"},[_vm._v(\" Request id: \"),_c('span',{staticClass:\"text-primary\"},[_vm._v(_vm._s(_vm.infoModal.id))])]),_c('p',{staticClass:\"mb-2\"},[_vm._v(\" Requested Product: \"),_c('span',{staticClass:\"text-primary\"},[_vm._v(_vm._s(_vm.infoModal.product_name))])]),_c('p',{staticClass:\"mb-2\"},[_vm._v(\" Requested From: \"),_c('span',{staticClass:\"text-primary\"},[_vm._v(_vm._s(_vm.infoModal.warehouse))])]),_c('p',{staticClass:\"mb-2\"},[_vm._v(\" Date: \"),_c('span',{staticClass:\"text-primary\"},[_vm._v(_vm._s(_vm.infoModal.date))])]),_c('div',{staticClass:\"table-responsive\"},[_c('table',{staticClass:\"table table-centered table-nowrap\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Product Name\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Product QTY\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Product Unit\")])])]),_c('tbody',[_c('tr',[_c('td',[_c('div',[_c('h5',{staticClass:\"text-truncate font-size-14\"},[_vm._v(\" \"+_vm._s(_vm.infoModal.product_name)+\" \")])])]),_c('td',[_vm._v(\" \"+_vm._s(_vm.infoModal.quantity)+\" \")]),_c('td',[_vm._v(_vm._s(_vm.infoModal.unit))])])])]),_c('b-button',{staticClass:\"mx-3\",attrs:{\"variant\":\"success\",\"block\":\"\"},on:{\"click\":function($event){return _vm.acceptRequest(_vm.infoModal)}}},[_vm._v(\"Accept\")]),_c('b-button',{staticClass:\"mx-2\",attrs:{\"variant\":\"warning\",\"block\":\"\"},on:{\"click\":function($event){return _vm.rejectRequest(_vm.infoModal)}}},[_vm._v(\"Reject\")])],1)])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport axios from 'axios'\nimport Layout from '../../layouts/main'\n// import PageHeader from '@/components/page-header'\n\n\n\n/**\n * Products-order component\n */\nexport default {\n   page: {\n    title: \"Supplies List\",\n  },\n  components: { Layout, },\n  computed: {\n      \n  },\n  watch: {\n\n  },\n  data() {\n    return {\n        requestList: [],\n        fields: [\n        {\n          key: \"id\",\n          label: \"ID\",\n          sortable: true,\n        },\n        {\n          key: \"product_name\",\n          label: \"Product\",\n          sortable: true,\n        },\n        {\n          key: \"quantity\",\n          label: \"QTY\",\n          sortable: true,\n        },\n        {\n          key: \"unit\",\n          label: \"Unit\",\n          sortable: true,\n        },\n        {\n          key: \"warehouse_name\",\n          label: \"Requested From\",\n          sortable: true,\n        },\n        { key: 'actions', label: 'Actions' }\n      ],\n      infoModal: {\n        id: '',\n        title: 'info-modal',\n        product_name: '',\n        quantity: '',\n        unit: '',\n        warehouse: '',\n        date: '',\n      },\n      requests: [],\n      reqResp: {},\n      filter: null,\n      filterOn: [],\n      sortBy: \"id\",\n      sortDesc: false,\n      currentPage: 1,\n      perPage: 10,\n      pageOptions: [10, 25, 50, 100],\n      totalRows: 1,\n    }\n  },\n  mounted() {\n    this.updateList();\n  },\n  methods: {\n    updateList() {\n        this.loggedUser = this.$store.state.authfack.user;\n\n        const TOKEN = this.loggedUser.token;\n\n        var bodyFormData = new FormData();\n        bodyFormData.set(\"status\", 1);\n        axios\n        .request({\n            method: \"post\",\n            url:\n            this.$hostname + \"warehouses/request-list\",\n            headers: {\n            Authorization: \"Bearer \" + TOKEN,\n            },\n            data: bodyFormData\n        })\n        .then((response) => {\n            this.requestList = response.data;\n        });\n    },\n    info(item, index, button) {\n        this.infoModal.title = `Row index: ${index}`\n        this.infoModal.id = item.id;\n        this.infoModal.product_name = item.product_name;\n        this.infoModal.unit = item.unit;\n        this.infoModal.quantity = item.quantity;\n        this.infoModal.warehouse = item.warehouse_name;\n        this.infoModal.date = item.created_at;\n        \n        this.$root.$emit('bv::show::modal', this.infoModal.id, button)\n    },\n    onFiltered(filteredItems) {\n      // Trigger pagination to update the number of buttons/pages due to filtering\n      this.totalRows = filteredItems.length;\n      this.currentPage = 1;\n    },\n    acceptRequest(request){\n        var req = {\n            id: '',\n            quantity: 0,\n        };\n        req.id = request.id;\n        req.quantity = request.quantity;\n        this.requests.push(req);\n\n        const TOKEN = this.loggedUser.token;\n\n        axios\n            .request({\n            method: \"post\",\n            url:\n                this.$hostname + \"warehouses/accept-request\",\n            headers: {\n                Authorization: \"Bearer \" + TOKEN,\n            },\n            data: {requests: this.requests}\n            })\n            .then((response) => {\n                if(response.status === 200){\n                    alert('Request Sent');\n                    this.$root.$emit('bv::hide::modal', this.infoModal.id);\n                    this.updateList();\n                }\n        });\n    },\n    rejectRequest(request){\n        var req = {\n            id: '',\n        };\n        req.id = request.id;\n        this.requests.push(req);\n\n        const TOKEN = this.loggedUser.token;\n\n        axios\n            .request({\n            method: \"post\",\n            url:\n                this.$hostname + \"warehouses/void-request\",\n            headers: {\n                Authorization: \"Bearer \" + TOKEN,\n            },\n            data: {requests: this.requests}\n            })\n            .then((response) => {\n                if(response.status === 200){\n                    alert('Request Voided');\n                    this.$root.$emit('bv::hide::modal', this.infoModal.id);\n                    this.updateList();\n                }\n        });\n    },\n},\n}\n</script>\n\n<template>\n<div data-app>\n  <Layout>\n    <div class=\"row\">\n        <div class=\"table-responsive mb-0\" style=\"min-height: 300px;\">\n            <b-table\n            class=\"datatables\"\n            :items=\"requestList\"\n            :fields=\"fields\"\n            responsive=\"sm\"\n            :per-page=\"perPage\"\n            :current-page=\"currentPage\"\n            :sort-by.sync=\"sortBy\"\n            :sort-desc.sync=\"sortDesc\"\n            :filter=\"filter\"\n            :filter-included-fields=\"filterOn\"\n            @filtered=\"onFiltered\"\n            >\n            <template #cell(actions)=\"row\">\n                <b-button size=\"sm\" @click=\"info(row.item, row.index, $event.target)\" class=\"mr-1\">\n                    Request Details\n                </b-button>\n            </template>\n            </b-table>\n        </div>\n    </div>\n\n    <b-modal :id=\"infoModal.id\" :title=\"infoModal.order_id\" hide-footer >\n\n      <p class=\"mb-2\">\n        Request id:\n        <span class=\"text-primary\">{{ infoModal.id }}</span>\n      </p>\n      <p class=\"mb-2\">\n        Requested Product:\n        <span class=\"text-primary\">{{ infoModal.product_name }}</span>\n      </p>\n      <p class=\"mb-2\">\n        Requested From:\n        <span class=\"text-primary\">{{ infoModal.warehouse }}</span>\n      </p>\n      <p class=\"mb-2\">\n        Date:\n        <span class=\"text-primary\">{{ infoModal.date }}</span>\n      </p>\n      <div class=\"table-responsive\">\n        <table class=\"table table-centered table-nowrap\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Product Name</th>\n              <th scope=\"col\">Product QTY</th>\n              <th scope=\"col\">Product Unit</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <div>\n                  <h5 class=\"text-truncate font-size-14\">\n                    {{ infoModal.product_name }}\n                  </h5>\n                </div>\n              </td>\n              <td>\n                {{ infoModal.quantity }}\n              </td>\n              <td>{{ infoModal.unit }}</td>\n            </tr>\n          </tbody>\n        </table>\n        <b-button class=\"mx-3\" variant=\"success\" block @click=\"acceptRequest(infoModal)\">Accept</b-button>\n        <b-button class=\"mx-2\" variant=\"warning\" block @click=\"rejectRequest(infoModal)\">Reject</b-button>\n      </div>\n\n    </b-modal>\n  </Layout>\n  </div>\n</template>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./manageSupplies.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./manageSupplies.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./manageSupplies.vue?vue&type=template&id=4b2b47bb\"\nimport script from \"./manageSupplies.vue?vue&type=script&lang=js\"\nexport * from \"./manageSupplies.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}