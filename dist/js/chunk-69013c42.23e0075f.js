(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69013c42"],{"106a":function(t,e,a){},1148:function(t,e,a){"use strict";var s=a("a691"),r=a("1d80");t.exports=function(t){var e=String(r(this)),a="",o=s(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(a+=e);return a}},"13fe":function(t,e,a){"use strict";a("6050")},2532:function(t,e,a){"use strict";var s=a("23e7"),r=a("5a34"),o=a("1d80"),i=a("ab13");s({target:"String",proto:!0,forced:!i("includes")},{includes:function(t){return!!~String(o(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"408a":function(t,e,a){var s=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},6050:function(t,e,a){},"6b83":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("PageHeader",{attrs:{title:t.title}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("b-alert",{attrs:{dismissible:"",variant:"danger"},model:{value:t.showAlert,callback:function(e){t.showAlert=e},expression:"showAlert"}},[t._v(t._s(t.alertText))])],1),a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-2"},[a("div",{staticClass:"search-box me-2 mb-2 d-inline-block"},[a("div",{staticClass:"position-relative"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchVal,expression:"searchVal"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.searchVal},on:{input:function(e){e.target.composing||(t.searchVal=e.target.value)}}}),a("i",{staticClass:"bx bx-search-alt search-icon"})])])]),a("div",{staticClass:"col-sm-2"},[a("b-form-select",{staticClass:"form-control",attrs:{options:t.branchOptions},model:{value:t.selectedBranch,callback:function(e){t.selectedBranch=e},expression:"selectedBranch"}})],1)]),a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-4"},[a("div",[a("label",{attrs:{for:"example-input"}},[t._v("From")]),a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{id:"example-input",type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}}),a("b-input-group-append",[a("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","aria-controls":"example-input"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1)],1)],1)]),a("div",{staticClass:"col-sm-4"},[a("div",[a("label",{attrs:{for:"example-input"}},[t._v("To")]),a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{id:"example-input",type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}}),a("b-input-group-append",[a("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","aria-controls":"example-input"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1)],1)],1)]),a("div",{staticClass:"col-sm-4 mt-4"},[a("b-button",{attrs:{variant:"success"},on:{click:function(e){t.updateDiscountOrders(),t.btnClick()}}},[a("i",{staticClass:"bx bx-check-double font-size-16 align-middle me-2"}),t._v(" Search ")]),0!=t.exportData.length?a("b-button",{staticClass:"mx-2",attrs:{variant:"primary"}},[a("div",{attrs:{id:"app"}},[a("ejs-button",{attrs:{iconCss:"e-icons e-play-icon",cssClass:"e-flat",isPrimary:!0,isToggle:!0},on:{click:t.toolbarClick}},[t._v("Excel Export")]),a("ejs-grid",{ref:"Grid",attrs:{id:"Grid",dataSource:t.exportData,toolbar:t.toolbarOptions,height:"270px",allowPaging:!0,allowExcelExport:!0,toolbarClick:t.toolbarClick}},[a("e-columns",[a("e-column",{attrs:{field:"id",headerText:"Order ID"}}),a("e-column",{attrs:{field:"name",headerText:"Customer Name"}}),a("e-column",{attrs:{field:"totalPrice",headerText:"Total Price"}}),a("e-column",{attrs:{field:"discountType",headerText:"Discount Type"}}),a("e-column",{attrs:{field:"discount",headerText:"Discount"}}),a("e-column",{attrs:{field:"amount",headerText:"Amount"}}),a("e-column",{attrs:{field:"totalDue",headerText:"Total Due"}}),a("e-column",{attrs:{field:"comment",headerText:"Comment"}}),a("e-column",{attrs:{field:"payment",headerText:"Payment"}}),a("e-column",{attrs:{field:"woltCode",headerText:"Wolt Code"}}),a("e-column",{attrs:{field:"status",headerText:"Status"}}),a("e-column",{attrs:{field:"date",headerText:"Date"}})],1)],1)],1)]):t._e(),0==t.exportData.length?a("b-button",{staticClass:"mx-2 hidden disablegrid",attrs:{variant:"primary"}},[a("div",{attrs:{id:"app"}},[a("ejs-button",{attrs:{iconCss:"e-icons e-play-icon",cssClass:"e-flat",isPrimary:!0,isToggle:!0},on:{click:t.toolbarClick}},[t._v("Excel Export")]),a("ejs-grid",{ref:"Grid",attrs:{id:"Grid",dataSource:t.exportData,toolbar:t.toolbarOptions,height:"270px",allowPaging:!0,allowExcelExport:!0,toolbarClick:t.toolbarClick}},[a("e-columns",[a("e-column",{attrs:{field:"id",headerText:"Order ID"}}),a("e-column",{attrs:{field:"deliveryMethod",headerText:"delivery Method"}}),a("e-column",{attrs:{field:"name",headerText:"Customer Name"}}),a("e-column",{attrs:{field:"totalPrice",headerText:"Total Price"}}),a("e-column",{attrs:{field:"discountType",headerText:"Discount Type"}}),a("e-column",{attrs:{field:"discount",headerText:"Discount"}}),a("e-column",{attrs:{field:"amount",headerText:"Amount"}}),a("e-column",{attrs:{field:"totalDue",headerText:"Total Due"}}),a("e-column",{attrs:{field:"comment",headerText:"Comment"}}),a("e-column",{attrs:{field:"payment",headerText:"Payment"}}),a("e-column",{attrs:{field:"woltCode",headerText:"Wolt Code"}}),a("e-column",{attrs:{field:"status",headerText:"Status"}}),a("e-column",{attrs:{field:"date",headerText:"Date"}})],1)],1)],1)]):t._e()],1)])]),a("Transaction",{attrs:{transactions:t.discountedOrders}})],1)])])],1)},r=[],o=(a("a4d3"),a("e01a"),a("159b"),a("caad"),a("2532"),a("b0c0"),a("a15b"),a("b680"),a("bc3a")),i=a.n(o),n=a("bf15"),d=a("444f"),l=a("2579"),c=a("c041"),u=a("e09d"),m=a("6e1f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Loader",{attrs:{loading:t.updating}},[a("div",{staticClass:"table-responsive mb-0"},[a("table",{staticClass:"table align-middle table-nowrap"},[a("thead",{staticClass:"table-light"},[a("tr",[a("th",{staticClass:"align-middle"},[t._v("Order ID")]),a("th",{staticClass:"align-middle"},[t._v("Billing Name")]),a("th",{staticClass:"align-middle"},[t._v("Date")]),a("th",{staticClass:"align-middle"},[t._v("Total")]),a("th",{staticClass:"align-middle"},[t._v("Type")]),a("th",{staticClass:"align-middle"},[t._v("Amount")]),a("th",{staticClass:"align-middle"},[t._v("Discounted")]),a("th",{staticClass:"align-middle"},[t._v("Total Due")]),a("th",{staticClass:"align-middle"},[t._v("Status")]),a("th",{staticClass:"align-middle"},[t._v("Method")]),a("th",{staticClass:"align-middle"},[t._v("View Details")])])]),a("tbody",t._l(t.transactions,(function(e){return a("tr",{key:e.id},[a("td",[a("a",{staticClass:"text-body fw-bold",attrs:{href:"javascript: void(0);"}},[t._v(t._s(e.id))])]),a("td",[t._v(t._s(e.order_data.customer.name))]),a("td",[t._v(t._s(e.finish_date))]),a("td",[t._v(t._s(e.order_data.totalPrice))]),a("td",[t._v(t._s(e.order_data.discountName))]),a("td",[t._v(t._s(e.order_data.discount)+" "+t._s(e.order_data.discType))]),a("td",[t._v(t._s(e.order_data.discPrice))]),a("td",[t._v(t._s(e.order_data.totalDue))]),a("td",[a("span",{staticClass:"badge badge-pill badge-soft-success font-size-11",class:{"badge-soft-warning":""+e.status!=7}},[t._v(t._s(e.statusName))])]),a("td",[t._v(" "+t._s(e.order_data.paymentType)+" ")]),a("td",[a("button",{staticClass:"btn btn-primary btn-sm btn-rounded",attrs:{type:"button"},on:{click:function(a){return t.$bvModal.show(e.id)}}},[t._v(" View Details ")])]),a("b-modal",{attrs:{id:e.id,title:"Order Details",centered:""}},[a("p",{staticClass:"mb-2"},[t._v(" Product id: "),a("span",{staticClass:"text-primary"},[t._v(t._s(e.id))])]),a("p",{staticClass:"mb-2"},[t._v(" Discount Type: "),a("span",{staticClass:"text-primary"},[t._v(t._s(e.order_data.discountName))])]),a("p",{staticClass:"mb-2"},[t._v(" Discount: "),a("span",{staticClass:"text-primary"},[t._v("- "+t._s(e.order_data.discount)+" "+t._s(e.order_data.discType))])]),a("p",{staticClass:"mb-4"},[t._v(" Customer Name: "),a("span",{staticClass:"text-primary"},[t._v(t._s(e.order_data.customer.name))])]),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-centered table-nowrap"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Product Name")]),a("th",{attrs:{scope:"col"}},[t._v("Product QTY")]),a("th",{attrs:{scope:"col"}},[t._v("Price")])])]),a("tbody",[t._l(e.order_data.items,(function(e,s){return a("tr",{key:s},[a("td",[a("div",[a("h5",{staticClass:"text-truncate font-size-14"},[t._v(" "+t._s(e.size)+" "+t._s(e.name)+" ")]),a("p",{staticClass:"text-muted mb-0"},[t._v("GEL "+t._s(e.price)+" x "+t._s(e.qty))])])]),a("td",[t._v(" X "+t._s(e.qty)+" ")]),a("td",[t._v(t._s(e.price*e.qty))])])})),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Sub Total:")])]),a("td",[t._v(t._s(e.order_data.totalPrice))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Discount:")])]),a("td",[t._v(t._s(e.order_data.discPrice))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Total Due:")])]),a("td",[t._v(t._s(e.order_data.totalDue))])])],2)])])])],1)})),0)])])])},p=[],f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"is-loading":t.loading}},[t._m(0),t._t("default")],2)},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"preloader-component"},[a("div",{staticClass:"status"},[a("div",{staticClass:"spinner-chase"},[a("div",{staticClass:"chase-dot"}),a("div",{staticClass:"chase-dot"}),a("div",{staticClass:"chase-dot"}),a("div",{staticClass:"chase-dot"}),a("div",{staticClass:"chase-dot"}),a("div",{staticClass:"chase-dot"})])])])}],b={data:function(){return{}},props:{loading:Boolean},mounted:function(){i.a.get("http://portal.ronnys.info/").then((function(t){setTimeout((function(){document.getElementsByClassName("preloader-component").forEach((function(t){t.style.display="none"})),document.getElementsByClassName("status").forEach((function(t){t.style.display="none"}))}),1e3)}))}},_=b,g=(a("13fe"),a("2877")),x=Object(g["a"])(_,f,v,!1,null,"1d114854",null),C=x.exports,D={components:{Loader:C},props:{transactions:{type:Array,default:function(){return[]}},updating:{type:Boolean}},data:function(){return{showModal:!1}}},y=D,T=Object(g["a"])(y,h,p,!1,null,null,null),w=T.exports,O=a("c2a4"),S=a("2b0e");S["default"].use(n["a"]),S["default"].use(c["a"]);var k={page:{title:"Discounts",meta:[{name:"description",content:O.description}]},components:{Layout:d["a"],PageHeader:l["a"],Transaction:w},data:function(){return{excelTitle:"Ronny's",toolbarOptions:["ExcelExport"],fromDate:String(new Date),toDate:null,selectedBranch:null,branchURL:null,showAlert:!1,alertText:"",orderStatuses:[],exportData:[],branchOptions:[{value:null,text:"Select Branch"},{value:"saburtalo",text:"Saburtalo"},{value:"vake",text:"Vake"},{value:"digomi",text:"Digomi"},{value:"gldani",text:"Gldani"}],loggedUser:{},discountedOrders:[],discountedOrdersOld:[],title:"Dicsounted Orders",items:[{text:"Ecommerce",href:"/"},{text:"Orders",active:!0}],searchVal:null}},watch:{selectedBranch:function(t){this.changeBranch(t)},searchVal:function(t){var e=this;0==t.length?(t=null,this.discountedOrders=this.discountedOrdersOld):(this.discountedOrders=[],this.discountedOrdersOld.forEach((function(a){String(a.id).includes(t)&&(0==e.discountedOrders.length&&(e.discountedOrders=[]),e.discountedOrders.push(a)),(String(a.order_data.discountName).toLowerCase().includes(t.toLowerCase())||String(a.order_data.customer.name).toLowerCase().includes(t.toLowerCase()))&&(0==e.discountedOrders.length&&(e.discountedOrders=[]),e.discountedOrders.push(a))})))}},provide:{grid:[u["a"],m["a"]]},mounted:function(){var t=this;this.fromDate=this.formatDate(this.fromDate),this.loggedUser=this.$store.state.authfack.user;var e=this.loggedUser.token;i.a.request({method:"post",url:this.$hostname+"poses/order-statuses",headers:{Authorization:"Bearer "+e}}).then((function(e){t.orderStatuses=e.data.data}))},methods:{btnClick:function(){this.$refs.Grid.$el.classList.contains("disablegrid")?(this.$refs.Grid.$el.classList.remove("disablegrid"),document.getElementById("GridParent").classList.remove("wrapper")):(this.$refs.Grid.$el.classList.add("disablegrid"),document.getElementById("GridParent").classList.add("wrapper"))},toolbarClick:function(){var t={header:{headerRows:7,rows:[{cells:[{colSpan:4,value:this.excelTitle,style:{fontColor:"#000000",fontSize:32,hAlign:"Center",bold:!0}}]},{cells:[{colSpan:4,value:"Branch: "+this.selectedBranch,style:{fontColor:"#000000",fontSize:15,hAlign:"Center",bold:!0}}]},{cells:[{colSpan:4,value:"Discounts",style:{fontColor:"#000000",fontSize:15,hAlign:"Center",bold:!0}}]},{cells:[{colSpan:4,value:"Date: "+this.fromDate+" - "+this.toDate,style:{fontColor:"#000000",fontSize:15,hAlign:"Center",bold:!0}}]}]},footer:{footerRows:4,rows:[{cells:[{colSpan:4,value:"Ronny's",style:{hAlign:"Center",bold:!0}}]}]}};this.$refs.Grid.excelExport(t)},formatDate:function(t){var e=new Date(t),a=""+(e.getMonth()+1),s=""+e.getDate(),r=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[r,a,s].join("-")},changeBranch:function(t){"saburtalo"==t?this.branchURL=this.$hostSaburtalo:"vake"==t?this.branchURL=this.$hostVake:"digomi"==t?this.branchURL=this.$hostDigomi:"gldani"==t&&(this.branchURL=this.$hostGldani)},updateDiscountOrders:function(){var t,e=this;if(t=null==this.toDate?this.fromDate+" to "+this.fromDate:this.fromDate+" to "+this.toDate,null==this.selectedBranch)this.showAlert=!0,this.alertText="Select Branch to continue...";else{var a=this.loggedUser.token,s=new FormData;s.set("day",t),s.set("branch",this.selectedBranch),i.a.request({method:"post",url:"http://new.ronnys.info/?r=v1/manager/discounted-orders",headers:{Authorization:"Bearer "+a},data:s}).then((function(t){e.discountedOrders=t.data.data,e.discountedOrdersOld=t.data.data,e.exportData=[],e.discountedOrders.forEach((function(t){t.id=String(t.id);var a=t.status-1;t.statusName=e.orderStatuses[a].status_name,"Diplomat"==t.order_data.discountName?(t.order_data.discPrice=t.order_data.totalPrice-t.order_data.totalPrice/1.18,t.order_data.discType="%"):"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?(t.order_data.discPrice=t.order_data.discount,t.order_data.discType="GEL"):(t.order_data.discPrice=(t.order_data.totalPrice/100*t.order_data.discount).toFixed(2),t.order_data.discType="%"),t.order_data.totalDue=(t.order_data.totalPrice-t.order_data.discPrice).toFixed(2);var s={};s.id=t.id,s.name=t.order_data.customer.name,s.totalPrice=t.order_data.totalPrice,s.discountType=t.order_data.discountName,s.discount=t.order_data.discount+" "+t.order_data.discType,s.amount=t.order_data.discPrice,s.totalDue=t.order_data.totalDue,s.comment=t.order_data.managerComment,s.payment=t.order_data.paymentType,s.status=t.statusName,s.date=t.finish_date,e.exportData.push(s)}))}))}}}},P=k,E=(a("73bb"),Object(g["a"])(P,s,r,!1,null,null,null));e["default"]=E.exports},"73bb":function(t,e,a){"use strict";a("106a")},b680:function(t,e,a){"use strict";var s=a("23e7"),r=a("a691"),o=a("408a"),i=a("1148"),n=a("d039"),d=1..toFixed,l=Math.floor,c=function(t,e,a){return 0===e?a:e%2===1?c(t,e-1,a*t):c(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},m=function(t,e,a){var s=-1,r=a;while(++s<6)r+=e*t[s],t[s]=r%1e7,r=l(r/1e7)},h=function(t,e){var a=6,s=0;while(--a>=0)s+=t[a],t[a]=l(s/e),s=s%e*1e7},p=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var s=String(t[e]);a=""===a?s:a+i.call("0",7-s.length)+s}return a},f=d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){d.call({})}));s({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,a,s,n,d=o(this),l=r(t),f=[0,0,0,0,0,0],v="",b="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return String(d);if(d<0&&(v="-",d=-d),d>1e-21)if(e=u(d*c(2,69,1))-69,a=e<0?d*c(2,-e,1):d/c(2,e,1),a*=4503599627370496,e=52-e,e>0){m(f,0,a),s=l;while(s>=7)m(f,1e7,0),s-=7;m(f,c(10,s,1),0),s=e-1;while(s>=23)h(f,1<<23),s-=23;h(f,1<<s),m(f,1,1),h(f,2),b=p(f)}else m(f,0,a),m(f,1<<-e,0),b=p(f)+i.call("0",l);return l>0?(n=b.length,b=v+(n<=l?"0."+i.call("0",l-n)+b:b.slice(0,n-l)+"."+b.slice(n-l))):b=v+b,b}})}}]);
//# sourceMappingURL=chunk-69013c42.23e0075f.js.map