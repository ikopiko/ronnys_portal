(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95bbbdee"],{1148:function(t,e,a){"use strict";var o=a("a691"),r=a("1d80");t.exports=function(t){var e=String(r(this)),a="",s=o(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(a+=e);return a}},"408a":function(t,e,a){var o=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=o(t))throw TypeError("Incorrect invocation");return+t}},"6df6":function(t,e,a){},"73f3":function(t,e,a){"use strict";a("6df6")},"948f":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Layout",[a("PageHeader",{attrs:{title:t.title}}),a("div",{staticClass:"row",attrs:{"data-app":""}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("b-alert",{attrs:{dismissible:"",variant:"danger"},model:{value:t.showAlert,callback:function(e){t.showAlert=e},expression:"showAlert"}},[t._v(t._s(t.alertText))])],1),a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-2"},[a("div",{staticClass:"search-box me-2 mb-2 d-inline-block"},[a("div",{staticClass:"position-relative"},[a("b-form-input",{attrs:{type:"search",placeholder:"Search..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("i",{staticClass:"bx bx-search-alt search-icon"})],1)])]),a("div",{staticClass:"col-sm-2"},[a("b-form-select",{staticClass:"form-control",attrs:{options:t.branchOptions},model:{value:t.selectedBranch,callback:function(e){t.selectedBranch=e},expression:"selectedBranch"}})],1)]),a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-4"},[a("div",[a("label",{attrs:{for:"example-input"}},[t._v("From")]),a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{id:"example-input",type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}}),a("b-input-group-append",[a("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","aria-controls":"example-input"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1)],1)],1)]),a("div",{staticClass:"col-sm-4"},[a("div",[a("label",{attrs:{for:"example-input"}},[t._v("To")]),a("b-input-group",{staticClass:"mb-3"},[a("b-form-input",{attrs:{id:"example-input",type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}}),a("b-input-group-append",[a("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","aria-controls":"example-input"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1)],1)],1)]),a("div",{staticClass:"col-sm-4 mt-4"},[a("b-button",{attrs:{variant:"success"},on:{click:function(e){t.updateList(),t.btnClick()}}},[a("i",{staticClass:"bx bx-check-double font-size-16 align-middle me-2"}),t._v(" Search ")]),0!=t.exportData.length?a("b-button",{staticClass:"mx-2",attrs:{variant:"primary"}},[a("div",{attrs:{id:"app"}},[a("ejs-button",{attrs:{iconCss:"e-icons e-play-icon",cssClass:"e-flat",isPrimary:!0,isToggle:!0},on:{click:t.toolbarClick}},[t._v("Excel Export")]),a("ejs-grid",{ref:"Grid",attrs:{id:"Grid",dataSource:t.exportData,toolbar:t.toolbarOptions,height:"270px",allowPaging:!0,allowExcelExport:!0,toolbarClick:t.toolbarClick}},[a("e-columns",[a("e-column",{attrs:{field:"id",headerText:"Order ID"}}),a("e-column",{attrs:{field:"deliveryMethod",headerText:"delivery Method"}}),a("e-column",{attrs:{field:"name",headerText:"Customer Name"}}),a("e-column",{attrs:{field:"totalPrice",headerText:"Total Price"}}),a("e-column",{attrs:{field:"discountType",headerText:"Discount Type"}}),a("e-column",{attrs:{field:"Discount",headerText:"Discount"}}),a("e-column",{attrs:{field:"amount",headerText:"Amount"}}),a("e-column",{attrs:{field:"totalDue",headerText:"Total Due"}}),a("e-column",{attrs:{field:"comment",headerText:"Comment"}}),a("e-column",{attrs:{field:"payment",headerText:"Payment"}}),a("e-column",{attrs:{field:"woltCode",headerText:"Wolt Code"}}),a("e-column",{attrs:{field:"status",headerText:"Status"}}),a("e-column",{attrs:{field:"date",headerText:"Date"}})],1)],1)],1)]):t._e(),0==t.exportData.length?a("b-button",{staticClass:"mx-2 hidden disablegrid",attrs:{variant:"primary"}},[a("div",{attrs:{id:"app"}},[a("ejs-button",{attrs:{iconCss:"e-icons e-play-icon",cssClass:"e-flat",isPrimary:!0,isToggle:!0},on:{click:t.toolbarClick}},[t._v("Excel Export")]),a("ejs-grid",{ref:"Grid",attrs:{id:"Grid",dataSource:t.exportData,toolbar:t.toolbarOptions,height:"270px",allowPaging:!0,allowExcelExport:!0,toolbarClick:t.toolbarClick}},[a("e-columns",[a("e-column",{attrs:{field:"id",headerText:"Order ID"}}),a("e-column",{attrs:{field:"name",headerText:"Customer Name"}}),a("e-column",{attrs:{field:"totalDue",headerText:"Total Due"}}),a("e-column",{attrs:{field:"id",headerText:"Order ID"}}),a("e-column",{attrs:{field:"name",headerText:"Customer Name"}}),a("e-column",{attrs:{field:"totalDue",headerText:"Total Due"}})],1)],1)],1)]):t._e()],1)])]),a("div",{staticClass:"table-responsive mb-0",staticStyle:{"min-height":"300px"}},[a("b-table",{staticClass:"datatables",attrs:{items:t.ordersList,fields:t.fields,responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(a){return t.info(e.item,e.index,a.target)}}},[t._v(" Info modal ")])]}}])})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"dataTables_paginate paging_simple_numbers float-end"},[a("ul",{staticClass:"pagination pagination-rounded mb-0"},[a("label",{staticClass:"d-inline-flex align-items-center"},[t._v(" Show  "),a("b-form-select",{staticClass:"form-select form-select-sm",attrs:{size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),t._v(" entries ")],1),a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])])]),a("b-modal",{attrs:{id:t.infoModal.id,title:t.infoModal.order_id,"ok-only":""}},[a("p",{staticClass:"mb-2"},[t._v(" LTD: "),a("span",{staticClass:"text-primary"},[t._v(t._s(t.infoModal.invoice.ltd))])]),a("p",{staticClass:"mb-2"},[t._v(" Address: "),a("span",{staticClass:"text-primary"},[t._v(t._s(t.infoModal.invoice.address))])]),a("p",{staticClass:"mb-2"},[t._v(" ID #: "),a("span",{staticClass:"text-primary"},[t._v(" "+t._s(t.infoModal.invoice.id))])]),a("p",{staticClass:"mb-2"},[t._v(" Customer Name: "),a("span",{staticClass:"text-primary"},[t._v(t._s(t.infoModal.invoice.name))])]),a("p",{staticClass:"mb-4"},[t._v(" Customer Phone: "),a("span",{staticClass:"text-primary"},[t._v(t._s(t.infoModal.invoice.phone))])]),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-centered table-nowrap"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Product Name")]),a("th",{attrs:{scope:"col"}},[t._v("Product QTY")]),a("th",{attrs:{scope:"col"}},[t._v("Price")])])]),a("tbody",[t._l(t.infoModal.items,(function(e,o){return a("tr",{key:o},[a("td",[a("div",[a("h5",{staticClass:"text-truncate font-size-14"},[t._v(" "+t._s(e.size)+" "+t._s(e.name)+" ")]),a("p",{staticClass:"text-muted mb-0"},[t._v("GEL "+t._s(e.price)+" x "+t._s(e.qty))])])]),a("td",[t._v(" X "+t._s(e.qty)+" ")]),a("td",[t._v(t._s(e.price*e.qty))])])})),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Sub Total:")])]),a("td",[t._v(t._s(t.infoModal.totalPrice))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Discount:")])]),a("td",[t._v(t._s(t.infoModal.discPrice))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Total Due:")])]),a("td",[t._v(t._s(t.infoModal.totalDue))])])],2)])])])],1)],1)},r=[],s=(a("a4d3"),a("e01a"),a("b0c0"),a("a15b"),a("4de4"),a("159b"),a("b680"),a("bc3a")),i=a.n(s),l=a("444f"),n=a("2579"),d=a("c041"),c=a("e09d"),u=a("6e1f"),m=a("c2a4"),f=a("2b0e");f["default"].use(d["a"]);var h={page:{title:"Invoices",meta:[{name:"description",content:m.description}]},components:{Layout:l["a"],PageHeader:n["a"]},computed:{rows:function(){return this.ordersList.length}},data:function(){return{excelTitle:"Ronny's",toolbarOptions:["ExcelExport"],fromDate:String(new Date),currentPage:1,perPage:10,pageOptions:[10,25,50,100],totalRows:1,filter:null,filterOn:[],sortBy:"id",sortDesc:!1,fields:[{key:"id",label:"ID",sortable:!0},{key:"order_data.deliveryMethod",label:"Order Type",sortable:!0},{key:"order_data.customer.name",label:"Customer Name",sortable:!0},{key:"statusName",label:"Status",sortable:!0},{key:"order_data.totalPrice",label:"Total Price",sortable:!0},{key:"order_data.totalDue",label:"Total Due",sortable:!0},{key:"finish_date",labelr:"Date",sortable:!0},{key:"actions",label:"Actions"}],items:[{text:"Tables",href:"/"},{text:"Advanced",active:!0}],toDate:null,selectedBranch:null,branchURL:null,modalItem:{},modalShow:!1,showAlert:!1,alertText:"",orderStatuses:[],exportData:[],branchOptions:[{value:null,text:"Select Branch"},{value:"saburtalo",text:"Saburtalo"},{value:"vake",text:"Vake"},{value:"digomi",text:"Digomi"},{value:"gldani",text:"Gldani"}],loggedUser:{},ordersList:[],ordersListOld:[],title:"Invoices",status:"1,2,3,4,5,6,7,8,9,10",infoModal:{id:"info-modal",order_id:"",discount:"",discountName:"",discountType:"",customer:"",items:[],totalPrice:"",discPrice:"",totalDue:"",invoice:{ltd:"",address:"",id:"",name:"",phone:""}}}},watch:{selectedBranch:function(t){this.changeBranch(t)}},mounted:function(){var t=this;this.fromDate=this.formatDate(this.fromDate),this.loggedUser=this.$store.state.authfack.user;var e=this.loggedUser.token;i.a.request({method:"post",url:this.$hostname+"poses/order-statuses",headers:{Authorization:"Bearer "+e}}).then((function(e){t.orderStatuses=e.data.data}))},provide:{grid:[c["a"],u["a"]]},methods:{btnClick:function(){this.$refs.Grid.$el.classList.contains("disablegrid")||(this.$refs.Grid.$el.classList.add("disablegrid"),document.getElementById("GridParent").classList.add("wrapper"))},toolbarClick:function(){var t={header:{headerRows:7,rows:[{cells:[{colSpan:4,value:this.excelTitle,style:{fontColor:"#000000",fontSize:32,hAlign:"Center",bold:!0}}]},{cells:[{colSpan:4,value:"Branch: "+this.selectedBranch,style:{fontColor:"#000000",fontSize:15,hAlign:"Center",bold:!0}}]},{cells:[{colSpan:4,value:"Orders list",style:{fontColor:"#000000",fontSize:15,hAlign:"Center",bold:!0}}]},{cells:[{colSpan:4,value:"Date: "+this.fromDate+" - "+this.toDate,style:{fontColor:"#000000",fontSize:15,hAlign:"Center",bold:!0}}]}]},footer:{footerRows:4,rows:[{cells:[{colSpan:4,value:"Ronny's",style:{hAlign:"Center",bold:!0}}]}]}};this.$refs.Grid.excelExport(t)},info:function(t,e,a){this.infoModal.title="Row index: ".concat(e),this.infoModal.order_id=t.id,this.infoModal.discountName=t.order_data.discountName,this.infoModal.discount=t.order_data.discount,this.infoModal.customer=t.order_data.customer.name,this.infoModal.items=t.order_data.items,this.infoModal.totalPrice=t.order_data.totalPrice,this.infoModal.discPrice=t.order_data.discPrice,this.infoModal.totalDue=t.order_data.totalDue,this.infoModal.invoice.ltd=t.order_data.invoice.ltd,this.infoModal.invoice.address=t.order_data.invoice.address,this.infoModal.invoice.id=t.order_data.invoice.id,this.infoModal.invoice.name=t.order_data.invoice.name,this.infoModal.invoice.phone=t.order_data.invoice.phone,this.infoModal.content=JSON.stringify(t,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,a)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},formatDate:function(t){var e=new Date(t),a=""+(e.getMonth()+1),o=""+e.getDate(),r=e.getFullYear();return a.length<2&&(a="0"+a),o.length<2&&(o="0"+o),[r,a,o].join("-")},changeBranch:function(t){"saburtalo"==t?this.branchURL=this.$hostSaburtalo:"vake"==t?this.branchURL=this.$hostVake:"digomi"==t?this.branchURL=this.$hostDigomi:"gldani"==t&&(this.branchURL=this.$hostGldani)},updateList:function(){var t,e=this;if(t=null==this.toDate?this.fromDate+" to "+this.fromDate:this.fromDate+" to "+this.toDate,null==this.selectedBranch)this.showAlert=!0,this.alertText="Select Branch to continue...";else{var a=this.loggedUser.token,o=new FormData;o.set("day",t),o.set("status_key",this.status),i.a.request({method:"post",url:this.branchURL+"orders/list",headers:{Authorization:"Bearer "+a},data:o}).then((function(t){e.ordersList=t.data.data,e.ordersList=e.ordersList.filter((function(t){return"invoice"==t.order_data.paymentType})),e.ordersListOld=t.data.data,e.exportData=[],e.ordersList.forEach((function(t){t.id=String(t.id);var a=t.status-1;t.statusName=e.orderStatuses[a].status_name,"Diplomat"==t.order_data.discountName?(t.order_data.discPrice=t.order_data.totalPrice-t.order_data.totalPrice/1.18,t.order_data.discType="%"):"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?(t.order_data.discPrice=t.order_data.discount,t.order_data.discType="GEL"):(t.order_data.discPrice=(t.order_data.totalPrice/100*t.order_data.discount).toFixed(2),t.order_data.discType="%"),t.order_data.totalDue=(t.order_data.totalPrice-t.order_data.discPrice).toFixed(2);var o={};o.id=t.id,o.deliveryMethod=t.order_data.deliveryType,o.name=t.order_data.customer.name,o.totalPrice=t.order_data.totalPrice,o.discountType=t.order_data.discountName,o.discount=t.order_data.discount+" "+t.order_data.discType,o.amount=t.order_data.discPrice,o.totalDue=t.order_data.totalDue,o.comment=t.order_data.managerComment,o.payment=t.order_data.paymentType,o.status=t.statusName,o.date=t.finish_date,e.exportData.push(o)}))}))}}}},p=h,b=(a("73f3"),a("2877")),v=Object(b["a"])(p,o,r,!1,null,null,null);e["default"]=v.exports},b680:function(t,e,a){"use strict";var o=a("23e7"),r=a("a691"),s=a("408a"),i=a("1148"),l=a("d039"),n=1..toFixed,d=Math.floor,c=function(t,e,a){return 0===e?a:e%2===1?c(t,e-1,a*t):c(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},m=function(t,e,a){var o=-1,r=a;while(++o<6)r+=e*t[o],t[o]=r%1e7,r=d(r/1e7)},f=function(t,e){var a=6,o=0;while(--a>=0)o+=t[a],t[a]=d(o/e),o=o%e*1e7},h=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var o=String(t[e]);a=""===a?o:a+i.call("0",7-o.length)+o}return a},p=n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){n.call({})}));o({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,a,o,l,n=s(this),d=r(t),p=[0,0,0,0,0,0],b="",v="0";if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(n<0&&(b="-",n=-n),n>1e-21)if(e=u(n*c(2,69,1))-69,a=e<0?n*c(2,-e,1):n/c(2,e,1),a*=4503599627370496,e=52-e,e>0){m(p,0,a),o=d;while(o>=7)m(p,1e7,0),o-=7;m(p,c(10,o,1),0),o=e-1;while(o>=23)f(p,1<<23),o-=23;f(p,1<<o),m(p,1,1),f(p,2),v=h(p)}else m(p,0,a),m(p,1<<-e,0),v=h(p)+i.call("0",d);return d>0?(l=v.length,v=b+(l<=d?"0."+i.call("0",d-l)+v:v.slice(0,l-d)+"."+v.slice(l-d))):v=b+v,v}})}}]);
//# sourceMappingURL=chunk-95bbbdee.44bcbce7.js.map