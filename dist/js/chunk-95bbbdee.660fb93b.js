<<<<<<< HEAD:dist/js/chunk-95bbbdee.6bf3b0dc.js
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95bbbdee"],{1148:function(t,e,a){"use strict";var r=a("a691"),o=a("1d80");t.exports=function(t){var e=String(o(this)),a="",s=r(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(a+=e);return a}},"408a":function(t,e,a){var r=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"6df6":function(t,e,a){},"73f3":function(t,e,a){"use strict";a("6df6")},"948f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("v-card",[a("v-form",{ref:"searchForm",attrs:{"lazy-validation":""}},[a("v-row",[a("v-col",{staticClass:"ml-2",attrs:{cols:"4"}},[a("date-picker",{attrs:{type:"date","value-type":"YYYY-MM-DD",format:"YYYY-MM-DD",range:"",placeholder:"Select date",rules:t.nameRules},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-autocomplete",{attrs:{clearable:"",items:t.branchOptions,dense:"",label:"Select branch"},on:{change:function(e){return t.updateRegion(e,t.index)}},model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{color:"primary",elevation:"0"},on:{click:function(e){return t.getReport()}}},[a("v-icon",{attrs:{small:""}},[t._v(" mdi-magnify ")]),t._v(" Search ")],1)],1)],1)],1),a("v-card-text",[a("v-card-title",{staticClass:"pl-0"},[a("v-text-field",{staticClass:"col-4 pl-0",attrs:{clearable:"",dense:"","append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.suppliesSearch,callback:function(e){t.suppliesSearch=e},expression:"suppliesSearch"}}),a("v-spacer"),t.json_data.length>0?a("export-excel",{staticClass:"btn btn-success",attrs:{data:t.json_data,fields:t.json_fields,worksheet:"Worksheet",name:t.exportName}},[a("i",{staticClass:"mdi mdi-download"},[t._v(" Export ")])]):t._e()],1),a("v-data-table",{attrs:{dense:"",loading:t.loader,"loading-text":"Loading... Please wait",headers:t.supplyHeaders,items:t.supplyList,"items-per-page":10,search:t.suppliesSearch},scopedSlots:t._u([{key:"item.status",fn:function(e){var r=e.item;return[a("span",{staticClass:"badge badge-pill  badge-soft-success",class:{"badge-soft-warning ":""+r.status!=7}},[t._v(t._s(r.statusName))])]}},{key:"item.actions",fn:function(e){var r=e.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,s=e.attrs;return[a("span",t._g(t._b({},"span",s,!1),o),[a("v-btn",{attrs:{icon:"",color:"primary"}},[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.showDetail(r)}}},[t._v(" mdi-eye ")])],1)],1)]}}],null,!0)},[a("span",[t._v("View Details")])])]}}],null,!0)})],1)],1),a("v-snackbar",{attrs:{color:t.color,elevation:"5"},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.attrs;return[a("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",r,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarText)+" ")]),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.detailModal,callback:function(e){t.detailModal=e},expression:"detailModal"}},[a("v-card",[a("v-toolbar",{attrs:{color:"white",elevation:"0"}},[a("span",{staticClass:"text-h6"},[t._v(" Order Details - "+t._s(t.modalProductId))]),a("v-spacer"),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{icon:"",small:"",color:"gray"},on:{click:function(e){t.detailModal=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("hr"),a("v-card-text",[a("v-form",{ref:"supplyForm",attrs:{"lazy-validation":""}},[a("v-row",[a("div",{staticClass:"mb-1"},[t._v("LTD: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.ltd:""))])]),a("div",{staticClass:"mb-1"},[t._v("Address: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.address:""))])]),a("div",{staticClass:"mb-1"},[t._v("ID #: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.id:""))])]),a("div",{staticClass:"mb-1"},[t._v("Customer Name: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.name:""))])]),a("div",[t._v("Customer Phone: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.phone:""))])]),a("hr"),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-centered table-nowrap"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Product Name")]),a("th",{attrs:{scope:"col"}},[t._v("Product QTY")]),a("th",{attrs:{scope:"col"}},[t._v("Price")])])]),a("tbody",[t._l(t.order_data,(function(e,r){return a("tr",{key:r},[a("td",[a("div",[a("div",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(" "+t._s(e.size)+" "+t._s(e.name)+" ")]),a("span",{staticClass:"text-muted font-size-14 mb-0"},[t._v("GEL "+t._s(e.price)+" x "+t._s(e.qty))])])]),a("td",[t._v(" X "+t._s(e.qty)+" ")]),a("td",[t._v(t._s(e.price*e.qty))])])})),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Sub Total:")])]),a("td",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(t.modalTotalPrice))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Discount:")])]),a("td",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(t.modalDiscount))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Total Due:")])]),a("td",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(t.modalTotalDue))])])],2)])])])],1)],1),a("hr"),a("v-card-actions",[a("v-spacer")],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text text-capitalize",attrs:{elevation:"0",color:"red",small:""},on:{click:function(e){t.detailModal=!1}}},[a("i",{staticClass:"bx bx-x-circle"}),t._v(" Close ")])],1)],1)],1)],1)},o=[],s=(a("b0c0"),a("b680"),a("159b"),a("bc3a")),i=a.n(s),d=a("444f"),n=a("ec45"),l=a("bf15"),c=a("2b0e"),u=a("c1df"),h=a.n(u);c["default"].use(l["a"]);var m={page:{title:"Sales Report"},components:{Layout:d["a"],DatePicker:n["a"]},computed:{},data:function(){return{modalTotalPrice:null,modalDiscount:null,modalTotalDue:null,order_data:[],fullOrder:[],modalProductId:null,modalDiscType:null,modalDisc:null,modalCustomer:null,orderStatuses:[],detailModal:!1,date:[h()(new Date).format("YYYY-MM-DD"),h()(new Date).format("YYYY-MM-DD")],branch:null,validSearch:!0,loader:!1,exportName:"All - "+h()(new Date).format("YYYY-MM-DD"),json_data:[],snackbar:!1,color:"default",snackbarText:null,TOKEN:null,selectedBranch:null,branchOptions:[{value:"Saburtalo",text:"Saburtalo"},{value:"Vake",text:"Vake"},{value:"Digomi",text:"Digomi"},{value:"Gldani",text:"Gldani"}],warehouseId:null,supplyList:[],suppliesSearch:"",branchURL:null,json_fields:{"Order ID":"id","Delivery Method":"order_data.deliveryMethod","Billing Name":"order_data.customer.name","Total price":"order_data.totalPrice",Type:"order_data.discountName",Amount:"order_data.newdiscount","Total due":"order_data.discounted",Comment:"order_data.managerComment",Method:"order_data.paymentType",Branch:"branch",status:"statusName",Date:"finish_date"},supplyHeaders:[{value:"id",text:"Order ID",sortable:!0},{value:"order_data.deliveryMethod",text:"Order Type",sortable:!0},{value:"order_data.customer.name",text:"Customer Name",sortable:!0},{value:"status",text:"Status",sortable:!0},{value:"order_data.totalPrice",text:"Total",sortable:!0},{value:"order_data.totalDue",text:"Total Due",sortable:!0},{value:"finish_date",text:"Finish date",sortable:!0},{value:"branch",text:"Branch",sortable:!0},{value:"actions",text:"Details",sortable:!0}],nameRules:[function(t){return!!t||" required"}]}},mounted:function(){var t=this;this.loggedUser=this.$store.state.authfack.user,this.warehouseId=this.loggedUser.warehouseId,this.TOKEN=this.loggedUser.token,i.a.request({method:"post",url:"http://posapi.ronnyspizza.grena.ge/rest/web/index.php?r=v1/poses/order-statuses",headers:{Authorization:"Bearer "+this.TOKEN}}).then((function(e){t.orderStatuses=e.data.data})),this.getReport()},methods:{showDetail:function(t){this.modalProductId=t.id,this.modalDiscType=t.order_data.discountName,this.modalDisc=t.order_data.discount+this.discount(t,"discname"),this.modalCustomer=t.order_data.customer.name,this.fullOrder=t,this.order_data=t.order_data.items,this.modalTotalPrice=t.order_data.totalPrice,this.modalDiscount=this.discount(t,"discounted"),this.modalTotalDue=this.discount(t,"totalDue"),this.detailModal=!0},discount:function(t,e){return"discname"==e?"Diplomat"==t.order_data.discountName?"%":"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?"GEL":"%":"discounted"==e?"Diplomat"==t.order_data.discountName?(t.order_data.totalPrice-t.order_data.totalPrice/1.18).toFixed(2):"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?t.order_data.discount:(t.order_data.totalPrice/100*t.order_data.discount).toFixed(2):"totalDue"==e?"Diplomat"==t.order_data.discountName?(t.order_data.totalPrice-(t.order_data.totalPrice-t.order_data.totalPrice/1.18)).toFixed(2):"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?(t.order_data.totalPrice-t.order_data.discount).toFixed(2):(t.order_data.totalPrice-t.order_data.totalPrice/100*t.order_data.discount).toFixed(2):void 0},getReport:function(){var t=this;this.$refs.searchForm.validate()&&(this.loader=!0,this.json_data=[],this.supplyList=[],this.branchURL="http://posapi.ronnyspizza.grena.ge/rest/web/index.php?r=v1/reporting/invoice-orders",i.a.request({method:"post",url:this.branchURL+"",headers:{Authorization:"Bearer "+this.TOKEN},data:{day:this.date,branch:this.branch}}).then((function(e){t.loader=!1,t.supplyList=t.json_data=e.data.data,t.supplyList.forEach((function(e){e.order_data.newdiscount=e.order_data.discount+t.discount(e,"discname"),e.order_data.discounted=t.discount(e,"discounted"),e.order_data.totalDue=t.discount(e,"totalDue"),e.statusName=t.orderStatuses[e.status-1].status_name})),console.log(t.supplyList)})))},updateRegion:function(t){this.exportName=t+" - "+this.date}}},v=m,p=(a("73f3"),a("2877")),f=Object(p["a"])(v,r,o,!1,null,null,null);e["default"]=f.exports},b680:function(t,e,a){"use strict";var r=a("23e7"),o=a("a691"),s=a("408a"),i=a("1148"),d=a("d039"),n=1..toFixed,l=Math.floor,c=function(t,e,a){return 0===e?a:e%2===1?c(t,e-1,a*t):c(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},h=function(t,e,a){var r=-1,o=a;while(++r<6)o+=e*t[r],t[r]=o%1e7,o=l(o/1e7)},m=function(t,e){var a=6,r=0;while(--a>=0)r+=t[a],t[a]=l(r/e),r=r%e*1e7},v=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var r=String(t[e]);a=""===a?r:a+i.call("0",7-r.length)+r}return a},p=n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!d((function(){n.call({})}));r({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,a,r,d,n=s(this),l=o(t),p=[0,0,0,0,0,0],f="",_="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(n<0&&(f="-",n=-n),n>1e-21)if(e=u(n*c(2,69,1))-69,a=e<0?n*c(2,-e,1):n/c(2,e,1),a*=4503599627370496,e=52-e,e>0){h(p,0,a),r=l;while(r>=7)h(p,1e7,0),r-=7;h(p,c(10,r,1),0),r=e-1;while(r>=23)m(p,1<<23),r-=23;m(p,1<<r),h(p,1,1),m(p,2),_=v(p)}else h(p,0,a),h(p,1<<-e,0),_=v(p)+i.call("0",l);return l>0?(d=_.length,_=f+(d<=l?"0."+i.call("0",l-d)+_:_.slice(0,d-l)+"."+_.slice(d-l))):_=f+_,_}})}}]);
//# sourceMappingURL=chunk-95bbbdee.6bf3b0dc.js.map
=======
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95bbbdee"],{1148:function(t,e,a){"use strict";var r=a("a691"),o=a("1d80");t.exports=function(t){var e=String(o(this)),a="",s=r(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(a+=e);return a}},"408a":function(t,e,a){var r=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"6df6":function(t,e,a){},"73f3":function(t,e,a){"use strict";a("6df6")},"948f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("v-card",[a("v-form",{ref:"searchForm",attrs:{"lazy-validation":""}},[a("v-row",[a("v-col",{staticClass:"ml-2",attrs:{cols:"4"}},[a("date-picker",{attrs:{type:"date","value-type":"YYYY-MM-DD",format:"YYYY-MM-DD",range:"",placeholder:"Select date",rules:t.nameRules},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-autocomplete",{attrs:{clearable:"",items:t.branchOptions,dense:"",label:"Select branch"},on:{change:function(e){return t.updateRegion(e,t.index)}},model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{color:"primary",elevation:"0"},on:{click:function(e){return t.getReport()}}},[a("v-icon",{attrs:{small:""}},[t._v(" mdi-magnify ")]),t._v(" Search ")],1)],1)],1)],1),a("v-card-text",[a("v-card-title",{staticClass:"pl-0"},[a("v-text-field",{staticClass:"col-4 pl-0",attrs:{clearable:"",dense:"","append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.suppliesSearch,callback:function(e){t.suppliesSearch=e},expression:"suppliesSearch"}}),a("v-spacer"),t.json_data.length>0?a("export-excel",{staticClass:"btn btn-success",attrs:{data:t.json_data,fields:t.json_fields,worksheet:"Worksheet",name:t.exportName}},[a("i",{staticClass:"mdi mdi-download"},[t._v(" Export ")])]):t._e()],1),a("v-data-table",{attrs:{dense:"",loading:t.loader,"loading-text":"Loading... Please wait",headers:t.supplyHeaders,items:t.supplyList,"items-per-page":10,search:t.suppliesSearch},scopedSlots:t._u([{key:"item.status",fn:function(e){var r=e.item;return[a("span",{staticClass:"badge badge-pill  badge-soft-success",class:{"badge-soft-warning ":""+r.status!=7}},[t._v(t._s(r.statusName))])]}},{key:"item.actions",fn:function(e){var r=e.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,s=e.attrs;return[a("span",t._g(t._b({},"span",s,!1),o),[a("v-btn",{attrs:{icon:"",color:"primary"}},[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.showDetail(r)}}},[t._v(" mdi-eye ")])],1)],1)]}}],null,!0)},[a("span",[t._v("View Details")])])]}}],null,!0)})],1)],1),a("v-snackbar",{attrs:{color:t.color,elevation:"5"},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.attrs;return[a("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",r,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarText)+" ")]),a("v-dialog",{attrs:{"max-width":"600"},model:{value:t.detailModal,callback:function(e){t.detailModal=e},expression:"detailModal"}},[a("v-card",[a("v-toolbar",{attrs:{color:"white",elevation:"0"}},[a("span",{staticClass:"text-h6"},[t._v(" Order Details - "+t._s(t.modalProductId))]),a("v-spacer"),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{icon:"",small:"",color:"gray"},on:{click:function(e){t.detailModal=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("hr"),a("v-card-text",[a("v-form",{ref:"supplyForm",attrs:{"lazy-validation":""}},[a("v-row",[a("div",{staticClass:"mb-1"},[t._v("LTD: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.ltd:""))])]),a("div",{staticClass:"mb-1"},[t._v("Address: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.address:""))])]),a("div",{staticClass:"mb-1"},[t._v("ID #: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.id:""))])]),a("div",{staticClass:"mb-1"},[t._v("Customer Name: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.name:""))])]),a("div",[t._v("Customer Phone: "),a("span",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(Object.keys(t.fullOrder).length>0?t.fullOrder.order_data.invoice.phone:""))])]),a("hr"),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-centered table-nowrap"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Product Name")]),a("th",{attrs:{scope:"col"}},[t._v("Product QTY")]),a("th",{attrs:{scope:"col"}},[t._v("Price")])])]),a("tbody",[t._l(t.order_data,(function(e,r){return a("tr",{key:r},[a("td",[a("div",[a("div",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(" "+t._s(e.size)+" "+t._s(e.name)+" ")]),a("span",{staticClass:"text-muted font-size-14 mb-0"},[t._v("GEL "+t._s(e.price)+" x "+t._s(e.qty))])])]),a("td",[t._v(" X "+t._s(e.qty)+" ")]),a("td",[t._v(t._s(e.price*e.qty))])])})),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Sub Total:")])]),a("td",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(t.modalTotalPrice))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Discount:")])]),a("td",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(t.modalDiscount))])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("h6",{staticClass:"m-0 text-end"},[t._v("Total Due:")])]),a("td",{staticClass:"font-size-15 font-weight-bold text-muted"},[t._v(t._s(t.modalTotalDue))])])],2)])])])],1)],1),a("hr"),a("v-card-actions",[a("v-spacer")],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text text-capitalize",attrs:{elevation:"0",color:"red",small:""},on:{click:function(e){t.detailModal=!1}}},[a("i",{staticClass:"bx bx-x-circle"}),t._v(" Close ")])],1)],1)],1)],1)},o=[],s=(a("b0c0"),a("b680"),a("159b"),a("bc3a")),i=a.n(s),d=a("444f"),n=a("ec45"),l=a("bf15"),c=a("2b0e"),u=a("c1df"),h=a.n(u);c["default"].use(l["a"]);var m={page:{title:"Sales Report"},components:{Layout:d["a"],DatePicker:n["a"]},computed:{},data:function(){return{modalTotalPrice:null,modalDiscount:null,modalTotalDue:null,order_data:[],fullOrder:[],modalProductId:null,modalDiscType:null,modalDisc:null,modalCustomer:null,orderStatuses:[],detailModal:!1,date:[h()(new Date).format("YYYY-MM-DD"),h()(new Date).format("YYYY-MM-DD")],branch:null,validSearch:!0,loader:!1,exportName:"All - "+h()(new Date).format("YYYY-MM-DD"),json_data:[],snackbar:!1,color:"default",snackbarText:null,TOKEN:null,selectedBranch:null,branchOptions:[{value:"Saburtalo",text:"Saburtalo"},{value:"Vake",text:"Vake"},{value:"Digomi",text:"Digomi"},{value:"Gldani",text:"Gldani"}],warehouseId:null,supplyList:[],suppliesSearch:"",branchURL:null,json_fields:{"Order ID":"id","Delivery Method":"order_data.deliveryMethod","Billing Name":"order_data.customer.name","Total price":"order_data.totalPrice",Type:"order_data.discountName",Amount:"order_data.newdiscount","Total due":"order_data.discounted",Comment:"order_data.managerComment",Method:"order_data.paymentType",Branch:"branch",status:"statusName",Date:"finish_date"},supplyHeaders:[{value:"id",text:"Order ID",sortable:!0},{value:"order_data.deliveryMethod",text:"Order Type",sortable:!0},{value:"order_data.customer.name",text:"Customer Name",sortable:!0},{value:"status",text:"Status",sortable:!0},{value:"order_data.totalPrice",text:"Total",sortable:!0},{value:"order_data.totalDue",text:"Total Due",sortable:!0},{value:"finish_date",text:"Finish date",sortable:!0},{value:"branch",text:"Branch",sortable:!0},{value:"actions",text:"Details",sortable:!0}],nameRules:[function(t){return!!t||" required"}]}},mounted:function(){var t=this;this.loggedUser=this.$store.state.authfack.user,this.warehouseId=this.loggedUser.warehouseId,this.TOKEN=this.loggedUser.token,i.a.request({method:"post",url:this.$hostname+"poses/order-statuses",headers:{Authorization:"Bearer "+this.TOKEN}}).then((function(e){t.orderStatuses=e.data.data})),this.getReport()},methods:{showDetail:function(t){this.modalProductId=t.id,this.modalDiscType=t.order_data.discountName,this.modalDisc=t.order_data.discount+this.discount(t,"discname"),this.modalCustomer=t.order_data.customer.name,this.fullOrder=t,this.order_data=t.order_data.items,this.modalTotalPrice=t.order_data.totalPrice,this.modalDiscount=this.discount(t,"discounted"),this.modalTotalDue=this.discount(t,"totalDue"),this.detailModal=!0},discount:function(t,e){return"discname"==e?"Diplomat"==t.order_data.discountName?"%":"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?"GEL":"%":"discounted"==e?"Diplomat"==t.order_data.discountName?(t.order_data.totalPrice-t.order_data.totalPrice/1.18).toFixed(2):"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?t.order_data.discount:(t.order_data.totalPrice/100*t.order_data.discount).toFixed(2):"totalDue"==e?"Diplomat"==t.order_data.discountName?(t.order_data.totalPrice-(t.order_data.totalPrice-t.order_data.totalPrice/1.18)).toFixed(2):"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?(t.order_data.totalPrice-t.order_data.discount).toFixed(2):(t.order_data.totalPrice-t.order_data.totalPrice/100*t.order_data.discount).toFixed(2):void 0},getReport:function(){var t=this;this.$refs.searchForm.validate()&&(this.loader=!0,this.json_data=[],this.supplyList=[],this.branchURL="http://new.ronnys.info/?r=v1/reporting/invoice-orders",i.a.request({method:"post",url:this.$hostname+"reporting/invoice-orders",headers:{Authorization:"Bearer "+this.TOKEN},data:{day:this.date,branch:this.branch}}).then((function(e){t.loader=!1,t.supplyList=t.json_data=e.data.data,t.supplyList.forEach((function(e){e.order_data.newdiscount=e.order_data.discount+t.discount(e,"discname"),e.order_data.discounted=t.discount(e,"discounted"),e.order_data.totalDue=t.discount(e,"totalDue"),e.statusName=t.orderStatuses[e.status-1].status_name})),console.log(t.supplyList)})))},updateRegion:function(t){this.exportName=t+" - "+this.date}}},v=m,f=(a("73f3"),a("2877")),p=Object(f["a"])(v,r,o,!1,null,null,null);e["default"]=p.exports},b680:function(t,e,a){"use strict";var r=a("23e7"),o=a("a691"),s=a("408a"),i=a("1148"),d=a("d039"),n=1..toFixed,l=Math.floor,c=function(t,e,a){return 0===e?a:e%2===1?c(t,e-1,a*t):c(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},h=function(t,e,a){var r=-1,o=a;while(++r<6)o+=e*t[r],t[r]=o%1e7,o=l(o/1e7)},m=function(t,e){var a=6,r=0;while(--a>=0)r+=t[a],t[a]=l(r/e),r=r%e*1e7},v=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var r=String(t[e]);a=""===a?r:a+i.call("0",7-r.length)+r}return a},f=n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!d((function(){n.call({})}));r({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,a,r,d,n=s(this),l=o(t),f=[0,0,0,0,0,0],p="",_="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(n<0&&(p="-",n=-n),n>1e-21)if(e=u(n*c(2,69,1))-69,a=e<0?n*c(2,-e,1):n/c(2,e,1),a*=4503599627370496,e=52-e,e>0){h(f,0,a),r=l;while(r>=7)h(f,1e7,0),r-=7;h(f,c(10,r,1),0),r=e-1;while(r>=23)m(f,1<<23),r-=23;m(f,1<<r),h(f,1,1),m(f,2),_=v(f)}else h(f,0,a),h(f,1<<-e,0),_=v(f)+i.call("0",l);return l>0?(d=_.length,_=p+(d<=l?"0."+i.call("0",l-d)+_:_.slice(0,d-l)+"."+_.slice(d-l))):_=p+_,_}})}}]);
//# sourceMappingURL=chunk-95bbbdee.660fb93b.js.map
>>>>>>> bbdecfe6c58eb64bf6d05bc7d57770825b4a129c:dist/js/chunk-95bbbdee.660fb93b.js
