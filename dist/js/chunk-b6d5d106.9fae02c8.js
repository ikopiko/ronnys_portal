(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6d5d106"],{"37a0":function(e,t,a){},a0cd:function(e,t,a){"use strict";a("37a0")},a4b8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("Layout",[t("v-card",[t("v-form",{ref:"searchForm",attrs:{"lazy-validation":""}},[t("v-row",[t("v-col",{staticClass:"ml-2",attrs:{cols:"4"}},[t("date-picker",{attrs:{type:"date","value-type":"YYYY-MM-DD",format:"YYYY-MM-DD",range:"",placeholder:"Select date",rules:e.nameRules},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("v-col",{attrs:{cols:"4"}},[t("v-autocomplete",{attrs:{clearable:"",items:e.branchOptions,dense:"",label:"Select branch"},model:{value:e.branch,callback:function(t){e.branch=t},expression:"branch"}})],1),t("v-col",{attrs:{cols:"2"}},[t("v-btn",{attrs:{color:"primary",elevation:"0"},on:{click:function(t){return e.getReport()}}},[t("v-icon",{attrs:{small:""}},[e._v(" mdi-magnify ")]),e._v(" Search ")],1)],1)],1)],1),t("v-card-text",[t("v-card-title",{staticClass:"pl-0"},[t("v-text-field",{staticClass:"col-4 pl-0",attrs:{clearable:"",dense:"","append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.suppliesSearch,callback:function(t){e.suppliesSearch=t},expression:"suppliesSearch"}}),t("v-spacer"),e.json_data.length>0?t("export-excel",{staticClass:"btn btn-success",attrs:{data:e.json_data,fields:e.json_fields,worksheet:"Worksheet",name:"Sale report.xls"}},[t("i",{staticClass:"mdi mdi-download"},[e._v(" Export ")])]):e._e()],1),t("v-data-table",{attrs:{dense:"",loading:e.loader,"loading-text":"Loading... Please wait",headers:e.supplyHeaders,items:e.supplyList,"items-per-page":10,search:e.suppliesSearch},scopedSlots:e._u([{key:"item.quantity",fn:function({item:t}){return[e._v(" "+e._s(t.quantity)+" "+e._s(t.size)+" ")]}}],null,!0)})],1)],1),t("v-snackbar",{attrs:{color:e.color,elevation:"5"},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t("v-btn",e._b({attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",a,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)},r=[],o=a("bc3a"),s=a.n(o),i=a("444f"),l=a("ec45"),c=a("bf15"),d=a("2b0e"),u=a("c1df"),h=a.n(u);d["default"].use(c["a"]);var p={page:{title:"Toppings Report"},components:{Layout:i["a"],DatePicker:l["a"]},computed:{},data(){return{date:[h()(new Date).format("YYYY-MM-DD"),h()(new Date).format("YYYY-MM-DD")],branch:null,validSearch:!0,loader:!1,json_fields:{Name:"name",Quantity:"quantity",Size:"size",Price:"price","Category name":"category_name"},json_data:[],snackbar:!1,color:"default",snackbarText:null,TOKEN:null,selectedBranch:null,branchOptions:[{value:"saburtalo",text:"Saburtalo"},{value:"vake",text:"Vake"},{value:"digomi",text:"Digomi"},{value:"gldani",text:"Gldani"}],warehouseId:null,supplyList:[],suppliesSearch:"",branchURL:null,supplyHeaders:[{text:"Name",align:"start",value:"t_name"},{text:"quantity",align:"start",value:"amount"}],nameRules:[e=>!!e||" required"]}},mounted(){this.loggedUser=this.$store.state.authfack.user,this.warehouseId=this.loggedUser.warehouseId,this.TOKEN=this.loggedUser.token},methods:{getReport(){this.$refs.searchForm.validate()&&(this.loader=!0,this.json_data=this.supplyList=[],"saburtalo"==this.branch?this.branchURL="http://178.134.12.106:8082/ronny/rest/web/index.php?r=v1/":"vake"==this.branch?this.branchURL="http://94.43.92.102:8082/ronny/rest/web/index.php?r=v1/":"digomi"==this.branch?this.branchURL="http://109.172.176.98:8082/ronny/rest/web/index.php?r=v1/":"gldani"==this.branch&&(this.branchURL="http://178.134.47.222:8082/ronny/rest/web/index.php?r=v1/"),s.a.request({method:"post",url:this.$hostname+"reporting/toppings-report",headers:{Authorization:"Bearer "+this.TOKEN},data:{date:this.date,branch:this.branch}}).then(e=>{this.loader=!1,this.json_data=this.supplyList=e.data,this.supplyList.forEach(e=>{e.selected=!1})}))}}},f=p,m=(a("a0cd"),a("0c7c")),b=Object(m["a"])(f,n,r,!1,null,null,null);t["default"]=b.exports},aefd:function(e,t,a){var n,r,o;(function(a,s){r=[],n=s,o="function"===typeof n?n.apply(t,r):n,void 0===o||(e.exports=o)})(0,(function(){return function e(t,a,n){var r,o,s=window,i="application/octet-stream",l=n||i,c=t,d=!a&&!n&&c,u=document.createElement("a"),h=function(e){return String(e)},p=s.Blob||s.MozBlob||s.WebKitBlob||h,f=a||"download";if(p=p.call?p.bind(s):Blob,"true"===String(this)&&(c=[c,l],l=c[0],c=c[1]),d&&d.length<2048&&(f=d.split("/").pop().split("?")[0],u.href=d,-1!==u.href.indexOf(d))){var m=new XMLHttpRequest;return m.open("GET",d,!0),m.responseType="blob",m.onload=function(t){e(t.target.response,f,i)},setTimeout((function(){m.send()}),0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&p!==h))return navigator.msSaveBlob?navigator.msSaveBlob(x(c),f):g(c);c=x(c),l=c.type||i}else if(/([\x80-\xff])/.test(c)){var b=0,y=new Uint8Array(c.length),v=y.length;for(b;b<v;++b)y[b]=c.charCodeAt(b);c=new p([y],{type:l})}function x(e){var t=e.split(/[:;,]/),a=t[1],n=e.indexOf("charset")>0?3:2,r="base64"==t[n]?atob:decodeURIComponent,o=r(t.pop()),s=o.length,i=0,l=new Uint8Array(s);for(i;i<s;++i)l[i]=o.charCodeAt(i);return new p([l],{type:a})}function g(e,t){if("download"in u)return u.href=e,u.setAttribute("download",f),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",u.addEventListener("click",(function(e){e.stopPropagation(),this.removeEventListener("click",arguments.callee)})),document.body.appendChild(u),setTimeout((function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout((function(){s.URL.revokeObjectURL(u.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var a=document.createElement("iframe");document.body.appendChild(a),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),a.src=e,setTimeout((function(){document.body.removeChild(a)}),333)}if(r=c instanceof p?c:new p([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,f);if(s.URL)g(s.URL.createObjectURL(r),!0);else{if("string"===typeof r||r.constructor===h)try{return g("data:"+l+";base64,"+s.btoa(r))}catch(w){return g("data:"+l+","+encodeURIComponent(r))}o=new FileReader,o.onload=function(e){g(this.result)},o.readAsDataURL(r)}return!0}}))},bf15:function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:e.idName},on:{click:e.generate}},[e._t("default",(function(){return[e._v(" Download "+e._s(e.name)+" ")]}))],2)},r=[],o=a("aefd"),s=a.n(o),i={name:"export-excel",props:{type:{type:String,default:"xls"},data:{type:Array,required:!1,default:null},fields:{type:Object,required:!1},exportFields:{type:Object,required:!1},defaultValue:{type:String,required:!1,default:""},title:{default:null},footer:{default:null},name:{type:String,default:"data.xls"},fetch:{type:Function},meta:{type:Array,default:()=>[]},worksheet:{type:String,default:"Sheet1"},beforeGenerate:{type:Function},beforeFinish:{type:Function}},computed:{idName(){var e=(new Date).getTime();return"export_"+e},downloadFields(){return void 0!==this.fields?this.fields:void 0!==this.exportFields?this.exportFields:void 0}},methods:{async generate(){"function"===typeof this.beforeGenerate&&await this.beforeGenerate();let e=this.data;if("function"!==typeof this.fetch&&e||(e=await this.fetch()),!e||!e.length)return;let t=this.getProcessedJson(e,this.downloadFields);return"html"===this.type?this.export(this.jsonToXLS(t),this.name.replace(".xls",".html"),"text/html"):"csv"===this.type?this.export(this.jsonToCSV(t),this.name.replace(".xls",".csv"),"application/csv"):this.export(this.jsonToXLS(t),this.name,"application/vnd.ms-excel")},export:async function(e,t,a){let n=this.base64ToBlob(e,a);"function"===typeof this.beforeFinish&&await this.beforeFinish(),s()(n,t,a)},jsonToXLS(e){let t='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=ProgId content=Excel.Sheet> <meta name=Generator content="Microsoft Excel 11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>${worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>br {mso-data-placement: same-cell;}</style></head><body><table>${table}</table></body></html>',a="<thead>";const n=Object.keys(e[0]).length;let r=this;null!=this.title&&(a+=this.parseExtraData(this.title,'<tr><th colspan="'+n+'">${data}</th></tr>')),a+="<tr>";for(let o in e[0])a+="<th>"+o+"</th>";return a+="</tr>",a+="</thead>",a+="<tbody>",e.map((function(e,t){a+="<tr>";for(let n in e)a+="<td>"+r.valueReformattedForMultilines(e[n])+"</td>";a+="</tr>"})),a+="</tbody>",null!=this.footer&&(a+="<tfoot>",a+=this.parseExtraData(this.footer,'<tr><td colspan="'+n+'">${data}</td></tr>'),a+="</tfoot>"),t.replace("${table}",a).replace("${worksheet}",this.worksheet)},jsonToCSV(e){var t=[];null!=this.title&&t.push(this.parseExtraData(this.title,"${data}\r\n"));for(let a in e[0])t.push(a),t.push(",");return t.pop(),t.push("\r\n"),e.map((function(e){for(let a in e){let n='="'+e[a]+'"';n.match(/[,"\n]/)&&(n='"'+n.replace(/\"/g,'""')+'"'),t.push(n),t.push(",")}t.pop(),t.push("\r\n")})),null!=this.footer&&t.push(this.parseExtraData(this.footer,"${data}\r\n")),t.join("")},getProcessedJson(e,t){let a=this.getKeys(e,t),n=[],r=this;return e.map((function(e,t){let o={};for(let n in a){let t=a[n];o[n]=r.getValue(t,e)}n.push(o)})),n},getKeys(e,t){if(t)return t;let a={};for(let n in e[0])a[n]=n;return a},parseExtraData(e,t){let a="";if(Array.isArray(e))for(var n=0;n<e.length;n++)a+=t.replace("${data}",e[n]);else a+=t.replace("${data}",e);return a},getValue(e,t){const a="object"!==typeof e?e:e.field;let n="string"!==typeof a?[]:a.split("."),r=this.defaultValue;return r=a?n.length>1?this.getValueFromNestedItem(t,n):this.parseValue(t[a]):t,e.hasOwnProperty("callback")&&(r=this.getValueFromCallback(r,e.callback)),r},valueReformattedForMultilines(e){return"string"==typeof e?e.replace(/\n/gi,"<br/>"):e},getValueFromNestedItem(e,t){let a=e;for(let n of t)a&&(a=a[n]);return this.parseValue(a)},getValueFromCallback(e,t){if("function"!==typeof t)return this.defaultValue;const a=t(e);return this.parseValue(a)},parseValue(e){return e||0===e||"boolean"===typeof e?e:this.defaultValue},base64ToBlob(e,t){let a=window.btoa(window.unescape(encodeURIComponent(e))),n=atob(a),r=n.length,o=new Uint8ClampedArray(r);while(r--)o[r]=n.charCodeAt(r);return new Blob([o],{type:t})}}},l=i,c=a("0c7c"),d=Object(c["a"])(l,n,r,!1,null,null,null),u=d.exports;const h={install:function(e){e.component(u.name,u)}};"undefined"!==typeof window&&window.Vue&&window.Vue.use(h);t["a"]=h}}]);
//# sourceMappingURL=chunk-b6d5d106.9fae02c8.js.map