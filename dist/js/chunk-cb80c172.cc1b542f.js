(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb80c172"],{"139a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("Layout",[e("v-row",[e("v-col",{staticClass:"ml-2",attrs:{cols:"2"}},[e("date-picker",{attrs:{type:"date","value-type":"YYYY-MM-DD",format:"YYYY-MM-DD",range:"",placeholder:"Select date",rules:t.nameRules},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),e("v-col",{attrs:{cols:"1"}},[e("v-autocomplete",{attrs:{items:t.typesList,"item-text":"name",dense:"","return-object":"",clearable:"",label:"ტიპი"},model:{value:t.typesId,callback:function(e){t.typesId=e},expression:"typesId"}})],1),e("v-col",{attrs:{cols:"1"}},[e("v-autocomplete",{attrs:{items:t.statusList,"item-text":"name",dense:"","return-object":"",clearable:"",label:"სტატუსი"},model:{value:t.statusId,callback:function(e){t.statusId=e},expression:"statusId"}})],1),e("v-col",{attrs:{cols:"1"}},[e("v-text-field",{attrs:{dense:"",label:"ავტო"},on:{input:function(e){t.car_number=t.car_number.toUpperCase()}},model:{value:t.car_number,callback:function(e){t.car_number=e},expression:"car_number"}})],1),e("v-col",{attrs:{cols:"2"}},[e("v-text-field",{attrs:{dense:"",label:"კომენტარი"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),e("v-col",{attrs:{cols:"1"}},[e("v-text-field",{attrs:{dense:"",label:"თანხა"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),e("v-col",{attrs:{cols:"2"}},[e("v-btn",{attrs:{color:"primary",elevation:"0"},on:{click:function(e){return t.getwaybillList()}}},[e("v-icon",{attrs:{small:""}},[t._v(" mdi-magnify ")]),t._v(" Search ")],1)],1)],1),e("v-card",[e("v-card-text",[e("v-card-title",[e("v-text-field",{staticClass:"col-2 pl-0",attrs:{dense:"","append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.waybillSearch,callback:function(e){t.waybillSearch=e},expression:"waybillSearch"}}),e("v-spacer")],1),e("v-data-table",{attrs:{loading:t.loader,dense:"","show-select":"",headers:t.waybillHeaders,items:t.waybillList,"items-per-page":10,search:t.waybillSearch},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"item.STATUS",fn:function({item:e}){return[t._v(" "+t._s(1==e.STATUS?"აქტიური":-2==e.STATUS?"გაუქმებული":"დასრულებული")+" ")]}},{key:"item.IS_CONFIRMED",fn:function({item:e}){return[t._v(" "+t._s(t.isconfirmed[e.IS_CONFIRMED])+" ")]}},{key:"item.TYPE",fn:function({item:e}){return[t._v(" "+t._s(t.waybillType[e.TYPE])+" ")]}}],null,!0)})],1)],1),e("v-dialog",{attrs:{"max-width":"800"},model:{value:t.waybillModal,callback:function(e){t.waybillModal=e},expression:"waybillModal"}},[e("v-card",[e("v-toolbar",{attrs:{color:"white",elevation:"0"}},[e("span",{staticClass:"text-h6"},[t._v(" Waybill Detail")]),e("v-spacer"),e("v-card-actions",{staticClass:"justify-end"},[e("v-btn",{attrs:{icon:"",small:"",color:"gray"},on:{click:function(e){t.waybillModal=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("hr"),e("v-card-text",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-data-table",{attrs:{"show-select":"",dense:"","hide-default-footer":!0,headers:t.waybillDetailHeader,items:t.waybillGoodsList,"item-key":"ID","items-per-page":10},model:{value:t.selectproduct,callback:function(e){t.selectproduct=e},expression:"selectproduct"}})],1),e("v-col",{attrs:{cols:"12",align:"right"}},[e("v-btn",{staticClass:"white--text text-capitalize",attrs:{color:"success me-2",elevation:"0",small:""},on:{click:t.confirmWaybill}},[e("i",{staticClass:"bx bx-check"}),t._v(" Confirm waybill ")])],1),e("v-form",{ref:"supplyForm",attrs:{"lazy-validation":""}},[e("v-col",{attrs:{cols:"12"}},t._l(t.selectproduct,(function(a){return e("v-row",{key:a.id},[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{attrs:{clearable:"",disabled:"",dense:"","append-icon":a.unit,label:"Enter name"},model:{value:a.W_NAME,callback:function(e){t.$set(a,"W_NAME",e)},expression:"pv.W_NAME"}})],1),e("v-col",{attrs:{cols:"6"}},[e("v-autocomplete",{attrs:{dense:"",rules:t.nameRules,items:t.productList,"item-text":"name",label:"Choose product","return-object":"","hide-selected":"",clearable:"",chips:"","small-chips":"","deletable-chips":""},model:{value:a.asd,callback:function(e){t.$set(a,"asd",e)},expression:"pv.asd"}})],1)],1)})),1),t.selectproduct.length>0?e("v-col",{attrs:{cols:"12",align:"right"}},[e("v-btn",{staticClass:"white--text text-capitalize",attrs:{color:"success me-2",elevation:"0",small:""},on:{click:t.addBarCode}},[e("i",{staticClass:"bx bx-check"}),t._v(" add barcodes ")])],1):t._e()],1)],1)],1)],1)],1),e("v-snackbar",{attrs:{color:t.color,elevation:"5"},scopedSlots:t._u([{key:"action",fn:function({attrs:a}){return[e("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[e("v-card-text",{domProps:{innerHTML:t._s(t.snackbarText)}})],1)],1)},l=[],i=a("bc3a"),o=a.n(i),r=a("444f"),c=a("ec45"),n=a("c1df"),d=a.n(n),u={page:{title:"Waybill"},components:{DatePicker:c["a"],Layout:r["a"]},computed:{},watch:{selectproduct:function(){console.log(this.selectproduct),this.showAddBarCode=this.selectproduct.length>0}},data(){return{productList:[],selectproduct:[],showAddBarCode:!1,car_number:"",comment:"",amount:"",typesId:"",typesList:[{id:1,name:"შიდა გადაზიდვა"},{id:2,name:"ტრანსპორტირებით"},{id:3,name:"ტრანსპორტირების გარეშე"},{id:4,name:"დისტრიბუცია"},{id:5,name:"უკან დაბრუნება"},{id:6,name:"ქვე-ზედნადები"}],statusId:"",statusList:[{id:"0",name:"შენახული"},{id:1,name:"აქტიური"},{id:2,name:"დასრულებული"},{id:8,name:"გადამზიდავთან გადაგზავნილი"},{id:-1,name:"წაშლილი"},{id:-2,name:"გაუქმებული"}],waybillType:[],isconfirmed:{0:"მისაღები",1:"მიღებული","-1":"უარყოფილი"},lastday:new Date,date:[],loader:!1,waybillModal:!1,selectedItem:{},showAcceptRecieveProductsBtn:!1,seletedwaybill:null,waybillDetail:null,snackbar:!1,color:"default",snackbarText:null,TOKEN:null,warehouseId:null,waybillList:[],waybillSearch:"",waybillGoodsList:[],waybillHeaders:[{text:"WAYBILL NUMBER",align:"start",value:"WAYBILL_NUMBER"},{text:"STATUS",value:"STATUS"},{text:"IS CONFIRMED",align:"start",value:"IS_CONFIRMED"},{text:"TYPE",value:"TYPE"},{text:"SELLER_NAME",value:"SELLER_NAME"},{text:"AMOUNT",value:"FULL_AMOUNT"},{text:"DRIVER",value:"DRIVER_NAME"},{text:"CAR_NUMBER",value:"CAR_NUMBER"},{text:"START_ADDRESS",value:"START_ADDRESS"},{text:"END_ADDRESS",value:"END_ADDRESS"},{text:"ACTIVATE_DATE",value:"ACTIVATE_DATE"},{text:"WAYBILL_COMMENT",value:"WAYBILL_COMMENT"}],waybillDetailHeader:[{text:"W_NAME",align:"start",value:"W_NAME"},{text:"QUANTITY",align:"start",value:"QUANTITY"},{text:"Barcode",align:"start",value:"BAR_CODE"},{text:"PRICE",align:"start",value:"PRICE"},{text:"AMOUNT",align:"start",value:"AMOUNT"}],nameRules:[t=>!!t||" required"]}},mounted(){this.lastday.setDate(this.lastday.getDate()-1),this.date=[d()(this.lastday).format("YYYY-MM-DD"),d()(new Date).format("YYYY-MM-DD")],this.loggedUser=this.$store.state.authfack.user,this.warehouseId=this.loggedUser.warehouseId,this.TOKEN=this.loggedUser.token,this.getwaybillTypes(),this.getwaybillList(),this.productslist()},methods:{addBarCode(){this.$refs.supplyForm.validate()&&o.a.request({method:"post",url:this.$hostname+"warehouses/add-barcode",headers:{Authorization:"Bearer "+this.TOKEN},data:{list:this.selectproduct}}).then(t=>{this.selectproduct=[],this.color="success",this.snackbarText=t.data.data,this.snackbar=!0,console.log(t.data.data)}).catch(t=>{this.color="warning",this.snackbarText=t.response.data.error,this.snackbar=!0})},productslist(){o.a.request({method:"post",url:this.$hostname+"warehouses/products-list",headers:{Authorization:"Bearer "+this.TOKEN}}).then(t=>{this.productList=t.data})},getwaybillTypes(){o.a.request({method:"post",url:this.$hostname+"rs/get-waybill-types",headers:{Authorization:"Bearer "+this.TOKEN}}).then(t=>{t.data.forEach(t=>{this.waybillType[t.ID]=t.NAME})})},rowClick(t,e){this.selectedItem=t,this.selectproduct=[],this.waybillModal=!0;var a=new FormData;a.set("waybill_id",t.ID),o.a.request({method:"post",url:this.$hostname+"rs/waybills-detail",headers:{Authorization:"Bearer "+this.TOKEN},data:a}).then(t=>{this.waybillGoodsList=t.data.GOODS.length?t.data.GOODS:[t.data.GOODS],console.log(t)})},getwaybillList(){this.loader=!0;var t=new FormData;t.set("warehouse_id",this.warehouseId),t.set("day",this.date),t.set("car_number",this.car_number),t.set("amount",this.amount),t.set("comment",this.comment),t.set("type_id",this.typesId?this.typesId.id:""),t.set("status",this.statusId?this.statusId.id:""),o.a.request({method:"post",url:this.$hostname+"rs/waybills",headers:{Authorization:"Bearer "+this.TOKEN},data:t}).then(t=>{this.loader=!1,this.waybillList=0==t.data.length?[]:t.data[1]?t.data:[t.data]})},confirmWaybill(){var t=new FormData;t.set("waybill_id",this.selectedItem.ID),o.a.request({method:"post",url:this.$hostname+"warehouses/confirm-waybill",headers:{Authorization:"Bearer "+this.TOKEN},data:t}).then(t=>{this.selectproduct=[],this.waybillModal=!1,this.color="success",this.snackbarText=t.data.data,this.snackbar=!0,console.log(t)}).catch(t=>{this.color="warning",this.snackbarText=t.response.data.error,this.snackbar=!0})}}},h=u,m=(a("2dd4"),a("0c7c")),b=Object(m["a"])(h,s,l,!1,null,null,null);e["default"]=b.exports},"2dd4":function(t,e,a){"use strict";a("7e51")},"7e51":function(t,e,a){}}]);
//# sourceMappingURL=chunk-cb80c172.cc1b542f.js.map