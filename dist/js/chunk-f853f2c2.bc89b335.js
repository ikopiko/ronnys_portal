(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f853f2c2"],{1148:function(t,a,e){"use strict";var s=e("a691"),r=e("1d80");t.exports=function(t){var a=String(r(this)),e="",i=s(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(a+=a))1&i&&(e+=a);return e}},"13fe":function(t,a,e){"use strict";e("6050")},2532:function(t,a,e){"use strict";var s=e("23e7"),r=e("5a34"),i=e("1d80"),o=e("ab13");s({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(i(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"408a":function(t,a,e){var s=e("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},6050:function(t,a,e){},"6b83":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Layout",[e("PageHeader",{attrs:{title:t.title}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("b-alert",{attrs:{dismissible:"",variant:"danger"},model:{value:t.showAlert,callback:function(a){t.showAlert=a},expression:"showAlert"}},[t._v(t._s(t.alertText))])],1),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"search-box me-2 mb-2 d-inline-block"},[e("div",{staticClass:"position-relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchVal,expression:"searchVal"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.searchVal},on:{input:function(a){a.target.composing||(t.searchVal=a.target.value)}}}),e("i",{staticClass:"bx bx-search-alt search-icon"})])])]),e("div",{staticClass:"col-sm-2"},[e("b-form-select",{staticClass:"form-control",attrs:{options:t.branchOptions},model:{value:t.selectedBranch,callback:function(a){t.selectedBranch=a},expression:"selectedBranch"}})],1)]),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-sm-4"},[e("div",[e("label",{attrs:{for:"example-input"}},[t._v("From")]),e("b-input-group",{staticClass:"mb-3"},[e("b-form-input",{attrs:{id:"example-input",type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off"},model:{value:t.fromDate,callback:function(a){t.fromDate=a},expression:"fromDate"}}),e("b-input-group-append",[e("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","aria-controls":"example-input"},model:{value:t.fromDate,callback:function(a){t.fromDate=a},expression:"fromDate"}})],1)],1)],1)]),e("div",{staticClass:"col-sm-4"},[e("div",[e("label",{attrs:{for:"example-input"}},[t._v("To")]),e("b-input-group",{staticClass:"mb-3"},[e("b-form-input",{attrs:{id:"example-input",type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off"},model:{value:t.toDate,callback:function(a){t.toDate=a},expression:"toDate"}}),e("b-input-group-append",[e("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"en-US","aria-controls":"example-input"},model:{value:t.toDate,callback:function(a){t.toDate=a},expression:"toDate"}})],1)],1)],1)]),e("div",{staticClass:"col-sm-4 mt-4"},[e("b-button",{attrs:{variant:"success"},on:{click:function(a){return t.updateDiscountOrders()}}},[e("i",{staticClass:"bx bx-check-double font-size-16 align-middle me-2"}),t._v(" Search ")]),0!=t.exportData.length?e("b-button",{staticClass:"mx-2",attrs:{variant:"primary"}},[e("export-excel",{attrs:{data:t.exportData,name:"discounts.xls"}},[t._v(" Export data to Excel "),e("i",{staticClass:"bx bx-download"})])],1):t._e()],1)])]),e("Transaction",{attrs:{transactions:t.discountedOrders}})],1)])])],1)},r=[],i=(e("a4d3"),e("e01a"),e("159b"),e("caad"),e("2532"),e("b0c0"),e("a15b"),e("b680"),e("bc3a")),o=e.n(i),n=e("bf15"),d=e("444f"),c=e("2579"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Loader",{attrs:{loading:t.updating}},[e("div",{staticClass:"table-responsive mb-0"},[e("table",{staticClass:"table align-middle table-nowrap"},[e("thead",{staticClass:"table-light"},[e("tr",[e("th",{staticClass:"align-middle"},[t._v("Order ID")]),e("th",{staticClass:"align-middle"},[t._v("Billing Name")]),e("th",{staticClass:"align-middle"},[t._v("Date")]),e("th",{staticClass:"align-middle"},[t._v("Total")]),e("th",{staticClass:"align-middle"},[t._v("Type")]),e("th",{staticClass:"align-middle"},[t._v("Amount")]),e("th",{staticClass:"align-middle"},[t._v("Discounted")]),e("th",{staticClass:"align-middle"},[t._v("Total Due")]),e("th",{staticClass:"align-middle"},[t._v("Status")]),e("th",{staticClass:"align-middle"},[t._v("Method")]),e("th",{staticClass:"align-middle"},[t._v("View Details")])])]),e("tbody",t._l(t.transactions,(function(a){return e("tr",{key:a.id},[e("td",[e("a",{staticClass:"text-body fw-bold",attrs:{href:"javascript: void(0);"}},[t._v(t._s(a.id))])]),e("td",[t._v(t._s(a.order_data.customer.name))]),e("td",[t._v(t._s(a.finish_date))]),e("td",[t._v(t._s(a.order_data.totalPrice))]),e("td",[t._v(t._s(a.order_data.discountName))]),e("td",[t._v(t._s(a.order_data.discount)+" "+t._s(a.order_data.discType))]),e("td",[t._v(t._s(a.order_data.discPrice))]),e("td",[t._v(t._s(a.order_data.totalDue))]),e("td",[e("span",{staticClass:"badge badge-pill badge-soft-success font-size-11",class:{"badge-soft-warning":""+a.status!=7}},[t._v(t._s(a.statusName))])]),e("td",[t._v(" "+t._s(a.order_data.paymentType)+" ")]),e("td",[e("button",{staticClass:"btn btn-primary btn-sm btn-rounded",attrs:{type:"button"},on:{click:function(e){return t.$bvModal.show(a.id)}}},[t._v(" View Details ")])]),e("b-modal",{attrs:{id:a.id,title:"Order Details",centered:""}},[e("p",{staticClass:"mb-2"},[t._v(" Product id: "),e("span",{staticClass:"text-primary"},[t._v(t._s(a.id))])]),e("p",{staticClass:"mb-2"},[t._v(" Discount Type: "),e("span",{staticClass:"text-primary"},[t._v(t._s(a.order_data.discountName))])]),e("p",{staticClass:"mb-2"},[t._v(" Discount: "),e("span",{staticClass:"text-primary"},[t._v("- "+t._s(a.order_data.discount)+" "+t._s(a.order_data.discType))])]),e("p",{staticClass:"mb-4"},[t._v(" Customer Name: "),e("span",{staticClass:"text-primary"},[t._v(t._s(a.order_data.customer.name))])]),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-centered table-nowrap"},[e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Product Name")]),e("th",{attrs:{scope:"col"}},[t._v("Product QTY")]),e("th",{attrs:{scope:"col"}},[t._v("Price")])])]),e("tbody",[t._l(a.order_data.items,(function(a,s){return e("tr",{key:s},[e("td",[e("div",[e("h5",{staticClass:"text-truncate font-size-14"},[t._v(" "+t._s(a.size)+" "+t._s(a.name)+" ")]),e("p",{staticClass:"text-muted mb-0"},[t._v("GEL "+t._s(a.price)+" x "+t._s(a.qty))])])]),e("td",[t._v(" X "+t._s(a.qty)+" ")]),e("td",[t._v(t._s(a.price*a.qty))])])})),e("tr",[e("td",{attrs:{colspan:"2"}},[e("h6",{staticClass:"m-0 text-end"},[t._v("Sub Total:")])]),e("td",[t._v(t._s(a.order_data.totalPrice))])]),e("tr",[e("td",{attrs:{colspan:"2"}},[e("h6",{staticClass:"m-0 text-end"},[t._v("Discount:")])]),e("td",[t._v(t._s(a.order_data.discPrice))])]),e("tr",[e("td",{attrs:{colspan:"2"}},[e("h6",{staticClass:"m-0 text-end"},[t._v("Total Due:")])]),e("td",[t._v(t._s(a.order_data.totalDue))])])],2)])])])],1)})),0)])])])},u=[],h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:{"is-loading":t.loading}},[t._m(0),t._t("default")],2)},m=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"preloader-component"},[e("div",{staticClass:"status"},[e("div",{staticClass:"spinner-chase"},[e("div",{staticClass:"chase-dot"}),e("div",{staticClass:"chase-dot"}),e("div",{staticClass:"chase-dot"}),e("div",{staticClass:"chase-dot"}),e("div",{staticClass:"chase-dot"}),e("div",{staticClass:"chase-dot"})])])])}],p={data:function(){return{}},props:{loading:Boolean},mounted:function(){o.a.get("http://portal.ronnys.info/").then((function(t){setTimeout((function(){document.getElementsByClassName("preloader-component").forEach((function(t){t.style.display="none"})),document.getElementsByClassName("status").forEach((function(t){t.style.display="none"}))}),1e3)}))}},v=p,_=(e("13fe"),e("2877")),f=Object(_["a"])(v,h,m,!1,null,"1d114854",null),b=f.exports,g={components:{Loader:b},props:{transactions:{type:Array,default:function(){return[]}},updating:{type:Boolean}},data:function(){return{showModal:!1}}},x=g,C=Object(_["a"])(x,l,u,!1,null,null,null),D=C.exports,y=e("c2a4"),w=e("2b0e");w["default"].use(n["a"]);var O={page:{title:"Discounts",meta:[{name:"description",content:y.description}]},components:{Layout:d["a"],PageHeader:c["a"],Transaction:D},data:function(){return{fromDate:String(new Date),toDate:null,selectedBranch:null,branchURL:null,showAlert:!1,alertText:"",orderStatuses:[],exportData:[],branchOptions:[{value:null,text:"Select Branch"},{value:"saburtalo",text:"Saburtalo"},{value:"vake",text:"Vake"},{value:"digomi",text:"Digomi"},{value:"gldani",text:"Gldani"}],loggedUser:{},discountedOrders:[],discountedOrdersOld:[],title:"Dicsounted Orders",items:[{text:"Ecommerce",href:"/"},{text:"Orders",active:!0}],searchVal:null}},watch:{selectedBranch:function(t){this.changeBranch(t)},searchVal:function(t){var a=this;0==t.length?(t=null,this.discountedOrders=this.discountedOrdersOld):(this.discountedOrders=[],this.discountedOrdersOld.forEach((function(e){String(e.id).includes(t)&&(0==a.discountedOrders.length&&(a.discountedOrders=[]),a.discountedOrders.push(e)),(String(e.order_data.discountName).toLowerCase().includes(t.toLowerCase())||String(e.order_data.customer.name).toLowerCase().includes(t.toLowerCase()))&&(0==a.discountedOrders.length&&(a.discountedOrders=[]),a.discountedOrders.push(e))})))}},mounted:function(){var t=this;this.fromDate=this.formatDate(this.fromDate),this.loggedUser=this.$store.state.authfack.user;var a=this.loggedUser.token;o.a.request({method:"post",url:this.$hostname+"poses/order-statuses",headers:{Authorization:"Bearer "+a}}).then((function(a){t.orderStatuses=a.data.data}))},methods:{formatDate:function(t){var a=new Date(t),e=""+(a.getMonth()+1),s=""+a.getDate(),r=a.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),[r,e,s].join("-")},changeBranch:function(t){"saburtalo"==t?this.branchURL="http://178.134.12.106:8082/ronny/rest/web/index.php?r=v1/":"vake"==t?this.branchURL="http://94.43.92.102:8082/ronny/rest/web/index.php?r=v1/":"digomi"==t?this.branchURL="http://109.172.176.98:8082/ronny/rest/web/index.php?r=v1/":"gldani"==t&&(this.branchURL="http://178.134.47.222:8082/ronny/rest/web/index.php?r=v1/")},updateDiscountOrders:function(){var t,a=this;if(t=null==this.toDate?this.fromDate+" to "+this.fromDate:this.fromDate+" to "+this.toDate,null==this.selectedBranch)this.showAlert=!0,this.alertText="Select Branch to continue...";else{var e=this.loggedUser.token,s=new FormData;s.set("day",t),o.a.request({method:"post",url:this.branchURL+"manager/discounted-orders",headers:{Authorization:"Bearer "+e},data:s}).then((function(t){a.discountedOrders=t.data.data,a.discountedOrdersOld=t.data.data,a.exportData=[],a.discountedOrders.forEach((function(t){t.id=String(t.id);var e=t.status-1;t.statusName=a.orderStatuses[e].status_name,"Diplomat"==t.order_data.discountName?(t.order_data.discPrice=t.order_data.totalPrice-t.order_data.totalPrice/1.18,t.order_data.discType="%"):"Manager"==t.order_data.discountName&&1==t.order_data.discountAmount?(t.order_data.discPrice=t.order_data.discount,t.order_data.discType="GEL"):(t.order_data.discPrice=(t.order_data.totalPrice/100*t.order_data.discount).toFixed(2),t.order_data.discType="%"),t.order_data.totalDue=(t.order_data.totalPrice-t.order_data.discPrice).toFixed(2);var s={};s.id=t.id,s.name=t.order_data.customer.name,s.totalPrice=t.order_data.totalPrice,s.discountType=t.order_data.discountName,s.discount=t.order_data.discount+" "+t.order_data.discType,s.amount=t.order_data.discPrice,s.totalDue=t.order_data.totalDue,s.comment=t.order_data.managerComment,s.payment=t.order_data.paymentType,s.status=t.statusName,s.date=t.finish_date,a.exportData.push(s)}))}))}}}},T=O,k=Object(_["a"])(T,s,r,!1,null,null,null);a["default"]=k.exports},b680:function(t,a,e){"use strict";var s=e("23e7"),r=e("a691"),i=e("408a"),o=e("1148"),n=e("d039"),d=1..toFixed,c=Math.floor,l=function(t,a,e){return 0===a?e:a%2===1?l(t,a-1,e*t):l(t*t,a/2,e)},u=function(t){var a=0,e=t;while(e>=4096)a+=12,e/=4096;while(e>=2)a+=1,e/=2;return a},h=function(t,a,e){var s=-1,r=e;while(++s<6)r+=a*t[s],t[s]=r%1e7,r=c(r/1e7)},m=function(t,a){var e=6,s=0;while(--e>=0)s+=t[e],t[e]=c(s/a),s=s%a*1e7},p=function(t){var a=6,e="";while(--a>=0)if(""!==e||0===a||0!==t[a]){var s=String(t[a]);e=""===e?s:e+o.call("0",7-s.length)+s}return e},v=d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){d.call({})}));s({target:"Number",proto:!0,forced:v},{toFixed:function(t){var a,e,s,n,d=i(this),c=r(t),v=[0,0,0,0,0,0],_="",f="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return String(d);if(d<0&&(_="-",d=-d),d>1e-21)if(a=u(d*l(2,69,1))-69,e=a<0?d*l(2,-a,1):d/l(2,a,1),e*=4503599627370496,a=52-a,a>0){h(v,0,e),s=c;while(s>=7)h(v,1e7,0),s-=7;h(v,l(10,s,1),0),s=a-1;while(s>=23)m(v,1<<23),s-=23;m(v,1<<s),h(v,1,1),m(v,2),f=p(v)}else h(v,0,e),h(v,1<<-a,0),f=p(v)+o.call("0",c);return c>0?(n=f.length,f=_+(n<=c?"0."+o.call("0",c-n)+f:f.slice(0,n-c)+"."+f.slice(n-c))):f=_+f,f}})}}]);
//# sourceMappingURL=chunk-f853f2c2.bc89b335.js.map