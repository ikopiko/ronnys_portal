{"remainingRequest":"D:\\ronnys_portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ronnys_portal\\src\\router\\views\\warehouse\\warehouse.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ronnys_portal\\src\\router\\views\\warehouse\\warehouse.vue","mtime":1641798484000},{"path":"D:\\ronnys_portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ronnys_portal\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\ronnys_portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ronnys_portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IExheW91dCBmcm9tICcuLi8uLi9sYXlvdXRzL21haW4nCi8vIGltcG9ydCBQYWdlSGVhZGVyIGZyb20gJ0AvY29tcG9uZW50cy9wYWdlLWhlYWRlcicKCgoKLyoqCiAqIFByb2R1Y3RzLW9yZGVyIGNvbXBvbmVudAogKi8KZXhwb3J0IGRlZmF1bHQgewogICBwYWdlOiB7CiAgICB0aXRsZTogIlByb2R1Y3RzIiwKICB9LAogIGNvbXBvbmVudHM6IHsgTGF5b3V0LCB9LAogIGNvbXB1dGVkOiB7CiAgICAgIHNlbGVjdGVkKCkgewogICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0OwogICAgICByZXR1cm4gdGhpcy5zdXBwbGllcy5maWx0ZXIoc3VwcGx5ID0+IHN1cHBseS5zZWxlY3RlZCkKICAgIH0sIAogICAgICBzZWxlY3RlZFByb2R1Y3RzKCkgewogICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0OwogICAgICByZXR1cm4gdGhpcy5wcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiBwcm9kdWN0LnNlbGVjdGVkKQogICAgfSwgCiAgfSwKICB3YXRjaDogewogICAgICBjaGFuZ2VTZWxlY3QoKSB7CiAgICAgICAgICB0aGlzLnJlcXVlc3REYXRhID0gdGhpcy5wcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiBwcm9kdWN0LnNlbGVjdGVkKTsKICAgICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgICAgcmVxdWVzdFN1cHBsaWVzQWN0aXZlOiBmYWxzZSwKICAgICAgICBuZXdQcm9kdWN0OiB7CiAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICB1bml0OiAnJwogICAgICAgIH0sCiAgICAgICAgcmVxdWVzdDogewogICAgICAgICAgICBzdXBwbGllczogW10sCiAgICAgICAgICAgIHdhcmVob3VzZV9pZDogbnVsbAogICAgICAgIH0sCiAgICAgICAgcmVzcG9uc2VEYXRhOiBudWxsLAogICAgICAgIHByb2R1Y3RzOiBbXSwKICAgICAgICByZXF1ZXN0RGF0YTogW10sCiAgICAgICAgc3VwcGxpZXM6IFtdLAogICAgICAgIHVuaXRzOiBbXSwKICAgICAgICBjaGFuZ2VTZWxlY3Q6IDAsCiAgICAgICAgd2FyZWhvdXNlX2lkOiAyLAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubG9nZ2VkVXNlciA9IHRoaXMuJHN0b3JlLnN0YXRlLmF1dGhmYWNrLnVzZXI7CgogICAgY29uc3QgVE9LRU4gPSB0aGlzLmxvZ2dlZFVzZXIudG9rZW47CgogICAgdmFyIGJvZHlGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgYm9keUZvcm1EYXRhLnNldCgid2FyZWhvdXNlX2lkIiwgdGhpcy53YXJlaG91c2VfaWQpOwogICAgYXhpb3MKICAgICAgLnJlcXVlc3QoewogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHVybDoKICAgICAgICAgIHRoaXMuJGhvc3RuYW1lICsgIndhcmVob3VzZXMvc3VwcGxpZXMtbGlzdCIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgVE9LRU4sCiAgICAgICAgfSwKICAgICAgICBkYXRhOiBib2R5Rm9ybURhdGEKICAgICAgfSkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5zdXBwbGllcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5zdXBwbGllcy5mb3JFYWNoKCh4KSA9PiB7CiAgICAgICAgICAgIHguc2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICAgIAogICAgICBheGlvcwogICAgICAucmVxdWVzdCh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOgogICAgICAgICAgdGhpcy4kaG9zdG5hbWUgKyAid2FyZWhvdXNlcy9wcm9kdWN0cy1saXN0IiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBUT0tFTiwKICAgICAgICB9LAogICAgICB9KQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB0aGlzLnByb2R1Y3RzLmZvckVhY2goKHgpID0+IHsKICAgICAgICAgICAgeC5zZWxlY3RlZCA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgICAgYWRkUmVxdWVzdCgpewogICAgICAgIHRoaXMucmVxdWVzdERhdGEuZm9yRWFjaCh4ID0+IHsKICAgICAgICAgICAgdmFyIHJlcSA9IHsKICAgICAgICAgICAgICAgIHByb2R1Y3RfaWQ6IHguaWQsCiAgICAgICAgICAgICAgICBxdWFudGl0eTogeC5uZXdRdHkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LnN1cHBsaWVzLnB1c2gocmVxKQogICAgICAgIH0pOwogICAgICAgIHRoaXMucmVxdWVzdC53YXJlaG91c2VfaWQgPSB0aGlzLndhcmVob3VzZV9pZDsKCiAgICAgICAgY29uc3QgVE9LRU4gPSB0aGlzLmxvZ2dlZFVzZXIudG9rZW47CgogICAgICAgIGF4aW9zCiAgICAgICAgLnJlcXVlc3QoewogICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgdXJsOgogICAgICAgICAgICB0aGlzLiRob3N0bmFtZSArICJ3YXJlaG91c2VzL3NlbmQtcmVxdWVzdCIsCiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgVE9LRU4sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IHsgc3VwcGxpZXM6IHRoaXMucmVxdWVzdCwgd2FyZWhvdXNlX2lkOiB0aGlzLndhcmVob3VzZV9pZCB9CiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgdGhpcy5yZXNwb25zZURhdGEgPSByZXNwb25zZTsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["warehouse.vue"],"names":[],"mappings":";AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"warehouse.vue","sourceRoot":"src/router/views/warehouse","sourcesContent":["<script>\nimport axios from 'axios'\nimport Layout from '../../layouts/main'\n// import PageHeader from '@/components/page-header'\n\n\n\n/**\n * Products-order component\n */\nexport default {\n   page: {\n    title: \"Products\",\n  },\n  components: { Layout, },\n  computed: {\n      selected() {\n        this.changeSelect;\n      return this.supplies.filter(supply => supply.selected)\n    }, \n      selectedProducts() {\n        this.changeSelect;\n      return this.products.filter(product => product.selected)\n    }, \n  },\n  watch: {\n      changeSelect() {\n          this.requestData = this.products.filter(product => product.selected);\n      }\n  },\n  data() {\n    return {\n        requestSuppliesActive: false,\n        newProduct: {\n            name: '',\n            unit: ''\n        },\n        request: {\n            supplies: [],\n            warehouse_id: null\n        },\n        responseData: null,\n        products: [],\n        requestData: [],\n        supplies: [],\n        units: [],\n        changeSelect: 0,\n        warehouse_id: 2,\n    }\n  },\n  mounted() {\n    this.loggedUser = this.$store.state.authfack.user;\n\n    const TOKEN = this.loggedUser.token;\n\n    var bodyFormData = new FormData();\n    bodyFormData.set(\"warehouse_id\", this.warehouse_id);\n    axios\n      .request({\n        method: \"post\",\n        url:\n          this.$hostname + \"warehouses/supplies-list\",\n        headers: {\n          Authorization: \"Bearer \" + TOKEN,\n        },\n        data: bodyFormData\n      })\n      .then((response) => {\n        this.supplies = response.data;\n        this.supplies.forEach((x) => {\n            x.selected = false;\n        });\n      });\n\n        \n      axios\n      .request({\n        method: \"post\",\n        url:\n          this.$hostname + \"warehouses/products-list\",\n        headers: {\n          Authorization: \"Bearer \" + TOKEN,\n        },\n      })\n      .then((response) => {\n        this.products = response.data;\n        this.products.forEach((x) => {\n            x.selected = false;\n        });\n      });\n  },\n  methods: {\n      addRequest(){\n        this.requestData.forEach(x => {\n            var req = {\n                product_id: x.id,\n                quantity: x.newQty\n            };\n            this.request.supplies.push(req)\n        });\n        this.request.warehouse_id = this.warehouse_id;\n\n        const TOKEN = this.loggedUser.token;\n\n        axios\n        .request({\n            method: \"post\",\n            url:\n            this.$hostname + \"warehouses/send-request\",\n            headers: {\n            Authorization: \"Bearer \" + TOKEN,\n            },\n            data: { supplies: this.request, warehouse_id: this.warehouse_id }\n        })\n        .then((response) => {\n            this.responseData = response;\n        });\n        \n      },\n  },\n}\n</script>\n\n<template>\n<div data-app>\n  <Layout>\n    <div class=\"row\">\n        <div class=\"col-4\">\n            <v-card\n                class=\"mx-auto\"\n                max-width=\"500\"\n            >\n                <v-toolbar\n                color=\"deep-purple accent-4\"\n                dark\n                >\n\n                <v-toolbar-title>Warehouses</v-toolbar-title>\n\n                <v-spacer></v-spacer>\n\n                <v-btn icon @click=\"requestSuppliesActive = true\">\n                    <v-icon>mdi-plus</v-icon>\n                </v-btn>\n                </v-toolbar>\n\n                <v-list subheader>\n\n                <v-list-item\n                    v-for=\"(supply, index) in supplies\"\n                    :key=\"index\"\n                    @click=\"supply.selected = !supply.selected, changeSelect = changeSelect+1\"\n                >\n                    <v-list-item-title>\n                        {{ supply.product_name }} - {{ supply.quantity }} {{ supply.unit }}\n                    </v-list-item-title>\n                    <v-list-item-action>\n                        <v-checkbox :value=\"supply.selected\" />\n                    </v-list-item-action>\n                    \n\n                    <v-list-item-content>\n                    <v-list-item-title v-text=\"supply.product_name\"></v-list-item-title>\n                    </v-list-item-content>\n\n                    <!-- <v-list-item-icon>\n                    <v-icon :color=\"'grey'\">\n                        mdi-message-outline\n                    </v-icon>\n                    </v-list-item-icon> -->\n                </v-list-item>\n                </v-list>\n                {{ selected }}\n            </v-card>\n        </div>\n        <div class=\"col-8\">\n            <v-card height=\"100%\" v-if=\"requestSuppliesActive\">\n                <v-card-title>\n                    Request Supplies\n                </v-card-title>\n                <div class=\"row\">\n                    <div class=\"col-4\">\n                        <v-list subheader>\n\n                        <v-list-item\n                            v-for=\"(product, index) in products\"\n                            :key=\"index\"\n                            @click=\"product.selected = !product.selected, changeSelect = changeSelect+1\"\n                        >\n                            <v-list-item-title>\n                                {{ product.name }}\n                            </v-list-item-title>\n                            <v-list-item-action>\n                                <v-checkbox :value=\"product.selected\" />\n                            </v-list-item-action>\n                            \n\n                            <v-list-item-content>\n                            <v-list-item-title v-text=\"product.name\"></v-list-item-title>\n                            </v-list-item-content>\n\n                        </v-list-item>\n                        </v-list>\n                    </div>\n                    <div class=\"col-6\">\n                        <div class=\"row\" \n                                v-for=\"(product, index) in selectedProducts\"\n                                :key=\"index\"> \n                            <div class=\"col-1\">&nbsp;</div>\n                            <div class=\"col-6\">\n                                <v-text-field\n                                    v-model=\"product.newQty\"\n                                    :label=\"product.name\"\n                                    :suffix=\"product.unit\"\n                                    required\n                                ></v-text-field>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            <v-card-actions>\n                <v-btn\n                    class=\"mr-4\"\n                    @click=\"addRequest\"\n                >\n                    Create Request\n                </v-btn>\n                <v-btn @click=\"requestSuppliesActive = false\">\n                    Close   \n                </v-btn>\n            </v-card-actions>\n            </v-card>\n        </div>\n    </div>\n  </Layout>\n  </div>\n</template>\n"]}]}