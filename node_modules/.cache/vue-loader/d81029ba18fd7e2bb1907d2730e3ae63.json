{"remainingRequest":"D:\\ronnys_portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ronnys_portal\\src\\router\\views\\warehouse\\manageSupplies.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ronnys_portal\\src\\router\\views\\warehouse\\manageSupplies.vue","mtime":1641798484000},{"path":"D:\\ronnys_portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ronnys_portal\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\ronnys_portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ronnys_portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IExheW91dCBmcm9tICcuLi8uLi9sYXlvdXRzL21haW4nCi8vIGltcG9ydCBQYWdlSGVhZGVyIGZyb20gJ0AvY29tcG9uZW50cy9wYWdlLWhlYWRlcicKCgoKLyoqCiAqIFByb2R1Y3RzLW9yZGVyIGNvbXBvbmVudAogKi8KZXhwb3J0IGRlZmF1bHQgewogICBwYWdlOiB7CiAgICB0aXRsZTogIlN1cHBsaWVzIExpc3QiLAogIH0sCiAgY29tcG9uZW50czogeyBMYXlvdXQsIH0sCiAgY29tcHV0ZWQ6IHsKICAgICAgCiAgfSwKICB3YXRjaDogewoKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAgIHJlcXVlc3RMaXN0OiBbXSwKICAgICAgICBmaWVsZHM6IFsKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJpZCIsCiAgICAgICAgICBsYWJlbDogIklEIiwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAicHJvZHVjdF9uYW1lIiwKICAgICAgICAgIGxhYmVsOiAiUHJvZHVjdCIsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogInF1YW50aXR5IiwKICAgICAgICAgIGxhYmVsOiAiUVRZIiwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAidW5pdCIsCiAgICAgICAgICBsYWJlbDogIlVuaXQiLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJ3YXJlaG91c2VfbmFtZSIsCiAgICAgICAgICBsYWJlbDogIlJlcXVlc3RlZCBGcm9tIiwKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgeyBrZXk6ICdhY3Rpb25zJywgbGFiZWw6ICdBY3Rpb25zJyB9CiAgICAgIF0sCiAgICAgIGluZm9Nb2RhbDogewogICAgICAgIGlkOiAnJywKICAgICAgICB0aXRsZTogJ2luZm8tbW9kYWwnLAogICAgICAgIHByb2R1Y3RfbmFtZTogJycsCiAgICAgICAgcXVhbnRpdHk6ICcnLAogICAgICAgIHVuaXQ6ICcnLAogICAgICAgIHdhcmVob3VzZTogJycsCiAgICAgICAgZGF0ZTogJycsCiAgICAgIH0sCiAgICAgIHJlcXVlc3RzOiBbXSwKICAgICAgcmVxUmVzcDoge30sCiAgICAgIGZpbHRlcjogbnVsbCwKICAgICAgZmlsdGVyT246IFtdLAogICAgICBzb3J0Qnk6ICJpZCIsCiAgICAgIHNvcnREZXNjOiBmYWxzZSwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBlclBhZ2U6IDEwLAogICAgICBwYWdlT3B0aW9uczogWzEwLCAyNSwgNTAsIDEwMF0sCiAgICAgIHRvdGFsUm93czogMSwKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnVwZGF0ZUxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZUxpc3QoKSB7CiAgICAgICAgdGhpcy5sb2dnZWRVc2VyID0gdGhpcy4kc3RvcmUuc3RhdGUuYXV0aGZhY2sudXNlcjsKCiAgICAgICAgY29uc3QgVE9LRU4gPSB0aGlzLmxvZ2dlZFVzZXIudG9rZW47CgogICAgICAgIHZhciBib2R5Rm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBib2R5Rm9ybURhdGEuc2V0KCJzdGF0dXMiLCAxKTsKICAgICAgICBheGlvcwogICAgICAgIC5yZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgIHVybDoKICAgICAgICAgICAgdGhpcy4kaG9zdG5hbWUgKyAid2FyZWhvdXNlcy9yZXF1ZXN0LWxpc3QiLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIFRPS0VOLAogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhOiBib2R5Rm9ybURhdGEKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLnJlcXVlc3RMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCiAgICBpbmZvKGl0ZW0sIGluZGV4LCBidXR0b24pIHsKICAgICAgICB0aGlzLmluZm9Nb2RhbC50aXRsZSA9IGBSb3cgaW5kZXg6ICR7aW5kZXh9YAogICAgICAgIHRoaXMuaW5mb01vZGFsLmlkID0gaXRlbS5pZDsKICAgICAgICB0aGlzLmluZm9Nb2RhbC5wcm9kdWN0X25hbWUgPSBpdGVtLnByb2R1Y3RfbmFtZTsKICAgICAgICB0aGlzLmluZm9Nb2RhbC51bml0ID0gaXRlbS51bml0OwogICAgICAgIHRoaXMuaW5mb01vZGFsLnF1YW50aXR5ID0gaXRlbS5xdWFudGl0eTsKICAgICAgICB0aGlzLmluZm9Nb2RhbC53YXJlaG91c2UgPSBpdGVtLndhcmVob3VzZV9uYW1lOwogICAgICAgIHRoaXMuaW5mb01vZGFsLmRhdGUgPSBpdGVtLmNyZWF0ZWRfYXQ7CiAgICAgICAgCiAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgnYnY6OnNob3c6Om1vZGFsJywgdGhpcy5pbmZvTW9kYWwuaWQsIGJ1dHRvbikKICAgIH0sCiAgICBvbkZpbHRlcmVkKGZpbHRlcmVkSXRlbXMpIHsKICAgICAgLy8gVHJpZ2dlciBwYWdpbmF0aW9uIHRvIHVwZGF0ZSB0aGUgbnVtYmVyIG9mIGJ1dHRvbnMvcGFnZXMgZHVlIHRvIGZpbHRlcmluZwogICAgICB0aGlzLnRvdGFsUm93cyA9IGZpbHRlcmVkSXRlbXMubGVuZ3RoOwogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgIH0sCiAgICBhY2NlcHRSZXF1ZXN0KHJlcXVlc3QpewogICAgICAgIHZhciByZXEgPSB7CiAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgcXVhbnRpdHk6IDAsCiAgICAgICAgfTsKICAgICAgICByZXEuaWQgPSByZXF1ZXN0LmlkOwogICAgICAgIHJlcS5xdWFudGl0eSA9IHJlcXVlc3QucXVhbnRpdHk7CiAgICAgICAgdGhpcy5yZXF1ZXN0cy5wdXNoKHJlcSk7CgogICAgICAgIGNvbnN0IFRPS0VOID0gdGhpcy5sb2dnZWRVc2VyLnRva2VuOwoKICAgICAgICBheGlvcwogICAgICAgICAgICAucmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICB1cmw6CiAgICAgICAgICAgICAgICB0aGlzLiRob3N0bmFtZSArICJ3YXJlaG91c2VzL2FjY2VwdC1yZXF1ZXN0IiwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgVE9LRU4sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IHtyZXF1ZXN0czogdGhpcy5yZXF1ZXN0c30KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1JlcXVlc3QgU2VudCcpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoJ2J2OjpoaWRlOjptb2RhbCcsIHRoaXMuaW5mb01vZGFsLmlkKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICByZWplY3RSZXF1ZXN0KHJlcXVlc3QpewogICAgICAgIHZhciByZXEgPSB7CiAgICAgICAgICAgIGlkOiAnJywKICAgICAgICB9OwogICAgICAgIHJlcS5pZCA9IHJlcXVlc3QuaWQ7CiAgICAgICAgdGhpcy5yZXF1ZXN0cy5wdXNoKHJlcSk7CgogICAgICAgIGNvbnN0IFRPS0VOID0gdGhpcy5sb2dnZWRVc2VyLnRva2VuOwoKICAgICAgICBheGlvcwogICAgICAgICAgICAucmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICB1cmw6CiAgICAgICAgICAgICAgICB0aGlzLiRob3N0bmFtZSArICJ3YXJlaG91c2VzL3ZvaWQtcmVxdWVzdCIsCiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIFRPS0VOLAogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhOiB7cmVxdWVzdHM6IHRoaXMucmVxdWVzdHN9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdSZXF1ZXN0IFZvaWRlZCcpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoJ2J2OjpoaWRlOjptb2RhbCcsIHRoaXMuaW5mb01vZGFsLmlkKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCn0sCn0K"},{"version":3,"sources":["manageSupplies.vue"],"names":[],"mappings":";AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"manageSupplies.vue","sourceRoot":"src/router/views/warehouse","sourcesContent":["<script>\nimport axios from 'axios'\nimport Layout from '../../layouts/main'\n// import PageHeader from '@/components/page-header'\n\n\n\n/**\n * Products-order component\n */\nexport default {\n   page: {\n    title: \"Supplies List\",\n  },\n  components: { Layout, },\n  computed: {\n      \n  },\n  watch: {\n\n  },\n  data() {\n    return {\n        requestList: [],\n        fields: [\n        {\n          key: \"id\",\n          label: \"ID\",\n          sortable: true,\n        },\n        {\n          key: \"product_name\",\n          label: \"Product\",\n          sortable: true,\n        },\n        {\n          key: \"quantity\",\n          label: \"QTY\",\n          sortable: true,\n        },\n        {\n          key: \"unit\",\n          label: \"Unit\",\n          sortable: true,\n        },\n        {\n          key: \"warehouse_name\",\n          label: \"Requested From\",\n          sortable: true,\n        },\n        { key: 'actions', label: 'Actions' }\n      ],\n      infoModal: {\n        id: '',\n        title: 'info-modal',\n        product_name: '',\n        quantity: '',\n        unit: '',\n        warehouse: '',\n        date: '',\n      },\n      requests: [],\n      reqResp: {},\n      filter: null,\n      filterOn: [],\n      sortBy: \"id\",\n      sortDesc: false,\n      currentPage: 1,\n      perPage: 10,\n      pageOptions: [10, 25, 50, 100],\n      totalRows: 1,\n    }\n  },\n  mounted() {\n    this.updateList();\n  },\n  methods: {\n    updateList() {\n        this.loggedUser = this.$store.state.authfack.user;\n\n        const TOKEN = this.loggedUser.token;\n\n        var bodyFormData = new FormData();\n        bodyFormData.set(\"status\", 1);\n        axios\n        .request({\n            method: \"post\",\n            url:\n            this.$hostname + \"warehouses/request-list\",\n            headers: {\n            Authorization: \"Bearer \" + TOKEN,\n            },\n            data: bodyFormData\n        })\n        .then((response) => {\n            this.requestList = response.data;\n        });\n    },\n    info(item, index, button) {\n        this.infoModal.title = `Row index: ${index}`\n        this.infoModal.id = item.id;\n        this.infoModal.product_name = item.product_name;\n        this.infoModal.unit = item.unit;\n        this.infoModal.quantity = item.quantity;\n        this.infoModal.warehouse = item.warehouse_name;\n        this.infoModal.date = item.created_at;\n        \n        this.$root.$emit('bv::show::modal', this.infoModal.id, button)\n    },\n    onFiltered(filteredItems) {\n      // Trigger pagination to update the number of buttons/pages due to filtering\n      this.totalRows = filteredItems.length;\n      this.currentPage = 1;\n    },\n    acceptRequest(request){\n        var req = {\n            id: '',\n            quantity: 0,\n        };\n        req.id = request.id;\n        req.quantity = request.quantity;\n        this.requests.push(req);\n\n        const TOKEN = this.loggedUser.token;\n\n        axios\n            .request({\n            method: \"post\",\n            url:\n                this.$hostname + \"warehouses/accept-request\",\n            headers: {\n                Authorization: \"Bearer \" + TOKEN,\n            },\n            data: {requests: this.requests}\n            })\n            .then((response) => {\n                if(response.status === 200){\n                    alert('Request Sent');\n                    this.$root.$emit('bv::hide::modal', this.infoModal.id);\n                    this.updateList();\n                }\n        });\n    },\n    rejectRequest(request){\n        var req = {\n            id: '',\n        };\n        req.id = request.id;\n        this.requests.push(req);\n\n        const TOKEN = this.loggedUser.token;\n\n        axios\n            .request({\n            method: \"post\",\n            url:\n                this.$hostname + \"warehouses/void-request\",\n            headers: {\n                Authorization: \"Bearer \" + TOKEN,\n            },\n            data: {requests: this.requests}\n            })\n            .then((response) => {\n                if(response.status === 200){\n                    alert('Request Voided');\n                    this.$root.$emit('bv::hide::modal', this.infoModal.id);\n                    this.updateList();\n                }\n        });\n    },\n},\n}\n</script>\n\n<template>\n<div data-app>\n  <Layout>\n    <div class=\"row\">\n        <div class=\"table-responsive mb-0\" style=\"min-height: 300px;\">\n            <b-table\n            class=\"datatables\"\n            :items=\"requestList\"\n            :fields=\"fields\"\n            responsive=\"sm\"\n            :per-page=\"perPage\"\n            :current-page=\"currentPage\"\n            :sort-by.sync=\"sortBy\"\n            :sort-desc.sync=\"sortDesc\"\n            :filter=\"filter\"\n            :filter-included-fields=\"filterOn\"\n            @filtered=\"onFiltered\"\n            >\n            <template #cell(actions)=\"row\">\n                <b-button size=\"sm\" @click=\"info(row.item, row.index, $event.target)\" class=\"mr-1\">\n                    Request Details\n                </b-button>\n            </template>\n            </b-table>\n        </div>\n    </div>\n\n    <b-modal :id=\"infoModal.id\" :title=\"infoModal.order_id\" hide-footer >\n\n      <p class=\"mb-2\">\n        Request id:\n        <span class=\"text-primary\">{{ infoModal.id }}</span>\n      </p>\n      <p class=\"mb-2\">\n        Requested Product:\n        <span class=\"text-primary\">{{ infoModal.product_name }}</span>\n      </p>\n      <p class=\"mb-2\">\n        Requested From:\n        <span class=\"text-primary\">{{ infoModal.warehouse }}</span>\n      </p>\n      <p class=\"mb-2\">\n        Date:\n        <span class=\"text-primary\">{{ infoModal.date }}</span>\n      </p>\n      <div class=\"table-responsive\">\n        <table class=\"table table-centered table-nowrap\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Product Name</th>\n              <th scope=\"col\">Product QTY</th>\n              <th scope=\"col\">Product Unit</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <div>\n                  <h5 class=\"text-truncate font-size-14\">\n                    {{ infoModal.product_name }}\n                  </h5>\n                </div>\n              </td>\n              <td>\n                {{ infoModal.quantity }}\n              </td>\n              <td>{{ infoModal.unit }}</td>\n            </tr>\n          </tbody>\n        </table>\n        <b-button class=\"mx-3\" variant=\"success\" block @click=\"acceptRequest(infoModal)\">Accept</b-button>\n        <b-button class=\"mx-2\" variant=\"warning\" block @click=\"rejectRequest(infoModal)\">Reject</b-button>\n      </div>\n\n    </b-modal>\n  </Layout>\n  </div>\n</template>\n"]}]}